<map version="freeplane 1.8.0">
<!--To view this file, download free mind mapping software Freeplane from http://freeplane.sourceforge.net -->
<node TEXT="TCP/IP" LOCALIZED_STYLE_REF="AutomaticLayout.level.root" FOLDED="false" ID="ID_1723255651" CREATED="1283093380553" MODIFIED="1608188131475" STYLE="bubble">
<font NAME="Noto Sans S Chinese Light" SIZE="14"/>
<hook NAME="MapStyle" zoom="1.077">
    <properties fit_to_viewport="false" show_icon_for_attributes="true" show_note_icons="true" edgeColorConfiguration="#808080ff,#ff0000ff,#0000ffff,#00ff00ff,#ff00ffff,#00ffffff,#7c0000ff,#00007cff,#007c00ff,#7c007cff,#007c7cff,#7c7c00ff"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" STYLE="oval" UNIFORM_SHAPE="true" VGAP_QUANTITY="24.0 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="24"/>
<stylenode LOCALIZED_TEXT="styles.predefined" POSITION="right" STYLE="bubble" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<stylenode LOCALIZED_TEXT="default" ICON_SIZE="12.0 pt" COLOR="#000000" STYLE="combined" BORDER_WIDTH="3.0 px" MAX_WIDTH="10.1 cm" MIN_WIDTH="0.0 cm" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false" ITALIC="false"/>
<edge STYLE="sharp_bezier" WIDTH="7"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.attributes" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note" COLOR="#000000" BACKGROUND_COLOR="#ffffff" TEXT_ALIGN="LEFT" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.floating" VGAP_QUANTITY="6.8999999999999995 pt">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" POSITION="right" STYLE="bubble" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<stylenode LOCALIZED_TEXT="styles.ok" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="button_ok"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.needs_action" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="messagebox_warning"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.floating_node" VGAP_QUANTITY="6.8999999999999995 pt">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.topic" COLOR="#18898b" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subtopic" COLOR="#cc3300" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subsubtopic" COLOR="#669900" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.connection" COLOR="#606060" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.important" COLOR="#ff0000" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="yes"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.question" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="help"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.key" COLOR="#996600" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="password"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.idea" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="idea"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.note" COLOR="#990000" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.date" COLOR="#0033ff" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="calendar"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.website" COLOR="#006633" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.list" COLOR="#cc6600" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="list"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.quotation" COLOR="#338800" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.definition" COLOR="#666600" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.description" COLOR="#996600" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.pending" COLOR="#b3b95c" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode TEXT="代码" COLOR="#c0fdce" BACKGROUND_COLOR="#000000" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" POSITION="right" STYLE="bubble" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#000000" STYLE="oval" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<edge COLOR="#003333"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#0033ff" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<edge COLOR="#808080"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#003366" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<edge COLOR="#808080"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#990000" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#111111" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,5" COLOR="#006666" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,6" VGAP_QUANTITY="6.8999999999999995 pt">
<font SIZE="12"/>
</stylenode>
</stylenode>
</stylenode>
</map_styles>
</hook>
<hook NAME="AutomaticEdgeColor" COUNTER="105" RULE="ON_BRANCH_CREATION"/>
<hook NAME="accessories/plugins/AutomaticLayout.properties" VALUE="ALL"/>
<node TEXT=" TCP/IP模型" POSITION="right" ID="ID_511903613" CREATED="1608188141098" MODIFIED="1608188142072">
<edge COLOR="#7c007c"/>
<node TEXT=" TCP/IP协议模型（Transmission Control Protocol/Internet Protocol），包含了一系列构成互联网基础的网络协议，是Internet的核心协议" ID="ID_1596740701" CREATED="1608188175938" MODIFIED="1608188177001"/>
<node TEXT=" 协议分成四个层次" ID="ID_996066273" CREATED="1608188190634" MODIFIED="1608188193938">
<node ID="ID_1093982853" CREATED="1608188212692" MODIFIED="1608188212692"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      应用层
    </p>
  </body>
</html>
</richcontent>
<node TEXT=" http，ftp 等等" ID="ID_1174566912" CREATED="1608188270537" MODIFIED="1608188271631"/>
</node>
<node ID="ID_648498840" CREATED="1608188212689" MODIFIED="1608188212689"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      传输层
    </p>
  </body>
</html>
</richcontent>
<node TEXT=" TCP和UDP协议" ID="ID_1656334190" CREATED="1608188284313" MODIFIED="1608188285478"/>
</node>
<node ID="ID_1108948624" CREATED="1608188212686" MODIFIED="1608188212686"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      网络层
    </p>
  </body>
</html>
</richcontent>
<node TEXT=" IP协议，负责对数据加上IP地址和其他的数据以确定传输的目标" ID="ID_1637814083" CREATED="1608188295753" MODIFIED="1608188311393"/>
</node>
<node ID="ID_1929758864" CREATED="1608188212686" MODIFIED="1608188212686"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      链路层
    </p>
  </body>
</html>
</richcontent>
<node TEXT=" 为待传送的数据加入一个以太网协议头，并进行CRC编码，为最后的数据传输做准备" ID="ID_1834285828" CREATED="1608188327513" MODIFIED="1608188328687"/>
</node>
</node>
<node TEXT=" TCP/IP模型与OSI模型(七层)各层的对照关系" ID="ID_97067685" CREATED="1608188403042" MODIFIED="1608188416372">
<node TEXT="" ID="ID_1433662809" CREATED="1608188424849" MODIFIED="1608188429555">
<hook URI="TCP、IP_files/png_6647869294525669596.png" SIZE="0.69041574" NAME="ExternalObject"/>
</node>
</node>
<node TEXT=" TCP/IP协议通信的过程其实就对应着数据入栈与出栈的过程" ID="ID_1364097425" CREATED="1608189295716" MODIFIED="1608189298928">
<node TEXT="" ID="ID_717478650" CREATED="1608189325378" MODIFIED="1608189336282">
<hook URI="TCP、IP_files/png_7939629507715049276.png" SIZE="0.72535145" NAME="ExternalObject"/>
</node>
<node TEXT="" ID="ID_795229182" CREATED="1608189527990" MODIFIED="1608189533048">
<hook URI="TCP、IP_files/png_8607219600785428983.png" SIZE="0.41063508" NAME="ExternalObject"/>
</node>
<node TEXT="链路层会封装有尾部封装" ID="ID_1378978007" CREATED="1608189345994" MODIFIED="1608189402291"/>
<node TEXT=" 入栈的过程" ID="ID_600326796" CREATED="1608189416378" MODIFIED="1608189417682">
<node ID="ID_1963587359" CREATED="1608189436397" MODIFIED="1608189436397"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      数据发送方每层不断地封装首部与尾部
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1998724369" CREATED="1608189436397" MODIFIED="1608189436397"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      添加一些传输的信息，确保能传输到目的地
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT=" 出栈的过程" ID="ID_982108889" CREATED="1608189446161" MODIFIED="1608189446961">
<node ID="ID_419904664" CREATED="1608189457756" MODIFIED="1608189457756"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      数据接收方每层不断地拆除首部与尾部
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_838805571" CREATED="1608189457756" MODIFIED="1608189457756"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      得到最终传输的数据
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="数据链路层" POSITION="right" ID="ID_442369157" CREATED="1608189565279" MODIFIED="1608189574890">
<edge COLOR="#007c7c"/>
<node TEXT="概念" ID="ID_1304237994" CREATED="1608189719886" MODIFIED="1608189726416">
<node TEXT="物理层负责0、1比特流与物理设备电压高低、光的闪灭之间的互换" ID="ID_39587059" CREATED="1608189731471" MODIFIED="1608189771181"/>
<node TEXT="数据链路层负责将0、1序列划分为数据帧从一个节点传输到临近的另一个节点,这些节点是通过MAC来唯一标识的" ID="ID_518246600" CREATED="1608189754182" MODIFIED="1608189770070"/>
</node>
<node TEXT="" ID="ID_1456585489" CREATED="1608189827974" MODIFIED="1608189831567">
<hook URI="TCP、IP_files/png_3611373462476393273.png" SIZE="0.69616884" NAME="ExternalObject"/>
</node>
<node TEXT="封装成帧" ID="ID_1784688447" CREATED="1608189841885" MODIFIED="1608189848945">
<node TEXT="把网络层数据报加头和尾，封装成帧,帧头中包括源MAC地址和目的MAC地址" ID="ID_154042697" CREATED="1608189897749" MODIFIED="1608189903431"/>
</node>
<node TEXT=" 透明传输" ID="ID_384252055" CREATED="1608189909125" MODIFIED="1608189909952">
<node TEXT=" 零比特填充、转义字符" ID="ID_1895318710" CREATED="1608189915901" MODIFIED="1608189916834"/>
</node>
<node TEXT=" 可靠传输" ID="ID_697879599" CREATED="1608189920980" MODIFIED="1608189922113">
<node TEXT=" 在出错率很低的链路上很少用，但是无线链路WLAN会保证可靠传输" ID="ID_641167263" CREATED="1608189927797" MODIFIED="1608189928939"/>
</node>
<node TEXT=" 差错检测(CRC)" ID="ID_2513051" CREATED="1608189934661" MODIFIED="1608189935520">
<node TEXT=" 接收者检测错误,如果发现差错，丢弃该帧" ID="ID_1637982221" CREATED="1608189940565" MODIFIED="1608189941682"/>
</node>
</node>
<node TEXT="网络层" POSITION="right" ID="ID_1804523269" CREATED="1608189987020" MODIFIED="1608189991037">
<edge COLOR="#7c7c00"/>
<node TEXT=" IP协议" ID="ID_1245380131" CREATED="1608189998460" MODIFIED="1608190003998">
<node TEXT=" IP协议是TCP/IP协议的核心，所有的TCP，UDP，IMCP，IGMP的数据都以IP数据格式传输" ID="ID_289456189" CREATED="1608190017100" MODIFIED="1608190018219"/>
<node TEXT=" IP不是可靠的协议，这是说，IP协议没有提供一种数据未传达以后的处理机制" ID="ID_1591742220" CREATED="1608190040565" MODIFIED="1608190041667"/>
<node TEXT="对数据未传达的处理是上层协议，TCP或UDP要做的事情" ID="ID_700453298" CREATED="1608190051268" MODIFIED="1608190105017"/>
</node>
<node TEXT=" IP地址" ID="ID_1513658231" CREATED="1608190116859" MODIFIED="1608190117853">
<node TEXT="在数据链路层中我们一般通过MAC地址来识别不同的节点，而在IP层我们也要有一个类似的地址标识，这就是IP地址" ID="ID_1854286913" CREATED="1608190362514" MODIFIED="1608190378238"/>
</node>
<node TEXT=" ARP及RARP协议" ID="ID_84761527" CREATED="1608192631533" MODIFIED="1608192632587">
<node TEXT=" ARP 是根据IP地址获取MAC地址的一种协议" ID="ID_1510884185" CREATED="1608192639501" MODIFIED="1608192640386"/>
<node TEXT="ARP工作流程" ID="ID_1279025307" CREATED="1608192879580" MODIFIED="1608192915070">
<node TEXT="本来主机是完全不知道这个IP对应的是哪个主机的哪个接口" ID="ID_289043959" CREATED="1608192915436" MODIFIED="1608192948478"/>
<node TEXT=" 主机要发送一个IP包的时，会查一下自己的ARP高速缓存(IP-MAC地址对应表)" ID="ID_1754433002" CREATED="1608192960445" MODIFIED="1608192982350"/>
<node TEXT=" 如果查询的IP－MAC值对不存在，主机就向网络发送一个ARP协议广播包，这个广播包里面就有待查询的IP地址" ID="ID_1816255619" CREATED="1608192992253" MODIFIED="1608193015255"/>
<node TEXT=" 收到这份广播的包的所有主机都会查询自己的IP地址，如果收到广播包的某一个主机发现自己符合条件，则回应发送广播的主机" ID="ID_21050668" CREATED="1608193030324" MODIFIED="1608193060382"/>
</node>
<node TEXT=" RARP协议的工作与ARP相反" ID="ID_570624945" CREATED="1608192870707" MODIFIED="1608192877311"/>
</node>
<node TEXT=" ICMP协议" ID="ID_625666910" CREATED="1608193073309" MODIFIED="1608193074434">
<node TEXT=" IP协议并不是一个可靠的协议，它不保证数据被送达，保证数据送达的工作应该由其他的模块来完成" ID="ID_997368981" CREATED="1608193188227" MODIFIED="1608193196668"/>
<node TEXT=" 其中一个重要的模块就是ICMP(网络控制报文)协议。ICMP不是高层协议，而是IP层的协议" ID="ID_1133142778" CREATED="1608193209266" MODIFIED="1608193211723"/>
<node TEXT=" 当传送IP数据包发生错误。比如主机不可达，路由不可达等等，ICMP协议将会把错误信息封包，然后传送回给主机" ID="ID_1921828969" CREATED="1608193334080" MODIFIED="1608193335767"/>
</node>
</node>
<node TEXT="ping" POSITION="right" ID="ID_1385958673" CREATED="1608198513399" MODIFIED="1608198519193">
<edge COLOR="#ff0000"/>
<node TEXT="ping利用ICMP协议包来侦测另一个主机是否可达" ID="ID_512849793" CREATED="1608198520350" MODIFIED="1608198611448"/>
<node TEXT=" 原理是用类型码为0的ICMP发请求，受到请求的主机则用类型码为8的ICMP回应" ID="ID_1586431763" CREATED="1608198624878" MODIFIED="1608198626054"/>
</node>
<node TEXT=" Traceroute" POSITION="right" ID="ID_1656106168" CREATED="1608198683045" MODIFIED="1608198684147">
<edge COLOR="#0000ff"/>
<node TEXT=" Traceroute是用来侦测主机到目的主机之间所经路由情况的重要工具" ID="ID_1233007632" CREATED="1608259411447" MODIFIED="1608259413269"/>
<node TEXT="给目的IP发送多个TTL由1累加的UDP包，途经路由收到后TTL减1，TTL为0则被路由抛弃，并返回ICMP数据给发送方" ID="ID_1065282881" CREATED="1608260202374" MODIFIED="1608260355480"/>
<node TEXT="步骤" ID="ID_426315344" CREATED="1608260416461" MODIFIED="1608260429887">
<node TEXT=" 给目的主机发送一个TTL=1的UDP包，收集第一个路由器的IP" ID="ID_1598078449" CREATED="1608260143143" MODIFIED="1608260373403"/>
<node TEXT="  给目的主机发送一个TTL=2的UDP包，收集第一个、第二个路由器的IP" ID="ID_56329792" CREATED="1608260183014" MODIFIED="1608260380377"/>
<node TEXT=" 如此往复直到到达目的主机。这样，traceroute就拿到了所有的路由器IP" ID="ID_1750790923" CREATED="1608260381869" MODIFIED="1608260398684"/>
</node>
<node TEXT=" tracert z.cn" ID="ID_1694645077" CREATED="1608260436462" MODIFIED="1608260444783"/>
</node>
<node TEXT=" TCP/UDP" POSITION="right" ID="ID_1201489591" CREATED="1608260557916" MODIFIED="1608260558960">
<edge COLOR="#00ff00"/>
<node TEXT=" TCP/UDP都是是传输层协议" ID="ID_29744966" CREATED="1608260571452" MODIFIED="1608260572374"/>
<node TEXT="对比" ID="ID_844141333" CREATED="1608260595500" MODIFIED="1608260598472">
<node TEXT="" ID="ID_869473414" CREATED="1608260603616" MODIFIED="1608260607579">
<hook URI="TCP、IP_files/png_8364248889490427838.png" SIZE="0.7966806" NAME="ExternalObject"/>
</node>
</node>
<node TEXT="面向报文" ID="ID_538303411" CREATED="1608260617700" MODIFIED="1608260625791">
<node TEXT=" 面向报文的传输方式是应用层交给UDP多长的报文，UDP就照样发送，即一次发送一个报文" ID="ID_1440222009" CREATED="1608260808835" MODIFIED="1608260810044"/>
<node TEXT=" 因此，应用程序必须选择合适大小的报文" ID="ID_1686509932" CREATED="1608260821476" MODIFIED="1608260822747"/>
<node TEXT=" 若报文太长，则IP层需要分片，降低效率" ID="ID_15887274" CREATED="1608260827396" MODIFIED="1608260828431"/>
<node TEXT=" 若太短，会是IP太小" ID="ID_242390158" CREATED="1608260833019" MODIFIED="1608260833896"/>
</node>
<node TEXT=" 面向字节流" ID="ID_906221916" CREATED="1608260842731" MODIFIED="1608260843914">
<node TEXT=" 虽然应用程序和TCP的交互是一次一个数据块（大小不等），但TCP把应用程序看成是一连串的无结构的字节流" ID="ID_872772698" CREATED="1608260879892" MODIFIED="1608260881413"/>
<node TEXT=" TCP有一个缓冲，当应用程序传送的数据块太长，TCP就可以把它划分短一些再传送" ID="ID_656761827" CREATED="1608260899331" MODIFIED="1608260900275"/>
</node>
<node TEXT="应用" ID="ID_1883975952" CREATED="1608260914306" MODIFIED="1608260920646">
<node TEXT="" ID="ID_848514791" CREATED="1608260925594" MODIFIED="1608260929803">
<hook URI="TCP、IP_files/png_8867362345116801264.png" SIZE="0.6291462" NAME="ExternalObject"/>
</node>
</node>
<node TEXT=" 什么时候应该使用TCP" ID="ID_1011605455" CREATED="1608260965058" MODIFIED="1608260966081">
<node TEXT=" 当对网络通讯质量有要求的时候使用TCP" ID="ID_57078155" CREATED="1608260972802" MODIFIED="1608260978962"/>
<node TEXT=" 整个数据要准确无误的传递给对方，这往往用于一些要求可靠的应用" ID="ID_887140939" CREATED="1608260994235" MODIFIED="1608260995758"/>
<node TEXT=" 比如HTTP、HTTPS、FTP等传输文件的协议，POP、SMTP等邮件传输的协议" ID="ID_1676613559" CREATED="1608261013490" MODIFIED="1608261014593"/>
</node>
<node TEXT=" 什么时候应该使用UDP" ID="ID_1578802823" CREATED="1608261021219" MODIFIED="1608261022364">
<node TEXT=" 当对网络通讯质量要求不高的时候，要求网络通讯速度能尽量的快，这时就可以使用UDP" ID="ID_103449115" CREATED="1608261028818" MODIFIED="1608261029826"/>
</node>
</node>
<node TEXT=" DNS" POSITION="right" ID="ID_1906014811" CREATED="1608261046290" MODIFIED="1608261047308">
<edge COLOR="#ff00ff"/>
<node TEXT=" DNS（Domain Name System，域名系统）" ID="ID_693700526" CREATED="1608261647665" MODIFIED="1608261648639"/>
<node TEXT=" 因特网上作为域名和IP地址相互映射的一个分布式数据库" ID="ID_24574074" CREATED="1608261659497" MODIFIED="1608261660768"/>
<node TEXT=" 通过主机名，最终得到该主机名对应的IP地址的过程叫做域名解析（或主机名解析）" ID="ID_123221740" CREATED="1608261675760" MODIFIED="1608261680306"/>
<node TEXT=" DNS协议运行在UDP协议之上，使用端口号53" ID="ID_1392692175" CREATED="1608261680993" MODIFIED="1608261682186"/>
</node>
<node TEXT=" TCP连接的建立与终止" POSITION="right" ID="ID_296522243" CREATED="1608273575113" MODIFIED="1608273576054">
<edge COLOR="#7c0000"/>
<node ID="ID_1294032735" CREATED="1608273580216" MODIFIED="1608273580216"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      三次握手
    </p>
  </body>
</html>
</richcontent>
<node TEXT="目的" ID="ID_1940062183" CREATED="1610023956972" MODIFIED="1610023964366">
<node TEXT="三次握手的目的是连接服务器指定端口，建立 TCP 连接，并同步连接双方的序列号和确认号，交换 TCP 窗口大小信息" ID="ID_182872767" CREATED="1608273605545" MODIFIED="1610024013839"/>
<node TEXT=" 为了保证服务端能收接受到客户端的信息并能做出正确的应答而进行前两次(第一次和第二次)握手" ID="ID_1131301731" CREATED="1610023983067" MODIFIED="1610023985028"/>
<node TEXT=" 为了保证客户端能够接收到服务端的信息并能做出正确的应答而进行后两次(第二次和第三次)握手" ID="ID_673154280" CREATED="1610023991075" MODIFIED="1610023993283"/>
</node>
<node TEXT=" 其中ACK报文是用来应答的，SYN报文是用来同步的" ID="ID_899194939" CREATED="1608274448332" MODIFIED="1608274452395"/>
<node TEXT="第一次握手" ID="ID_410353346" CREATED="1608273615089" MODIFIED="1608273620658">
<node TEXT="客户端请求服务器，SYN=1 Seq=X" ID="ID_495945416" CREATED="1608273625321" MODIFIED="1608273689542"/>
<node TEXT=" 客户端进入SYN_SEND状态，等待服务器的确认" ID="ID_1140673949" CREATED="1608273843651" MODIFIED="1608273845135"/>
</node>
<node TEXT="第二次握手" ID="ID_1251850990" CREATED="1608273663745" MODIFIED="1608273669164">
<node TEXT="服务器回应并请求客户端，ACK=X+1, SYN=1, Seq=Y" ID="ID_852748470" CREATED="1608273669842" MODIFIED="1608273761093"/>
<node TEXT=" 服务器进入SYN_RECV状态" ID="ID_793019705" CREATED="1608273858897" MODIFIED="1608273860424"/>
</node>
<node TEXT="第三次握手" ID="ID_1383409319" CREATED="1608273763377" MODIFIED="1608273768770">
<node TEXT="客户端回应服务器，ACK=Y+1, Seq=Z" ID="ID_1313845426" CREATED="1608273769065" MODIFIED="1608273809242"/>
<node TEXT=" 客户端和服务器端都进入ESTABLISHED状态，完成TCP三次握手" ID="ID_343366823" CREATED="1608273894480" MODIFIED="1608273895895"/>
</node>
</node>
<node TEXT=" 为什么建立TCP连接要三次握手" ID="ID_466560137" CREATED="1608273901808" MODIFIED="1610024073149">
<node TEXT=" 为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误" ID="ID_893766031" CREATED="1608273912488" MODIFIED="1608273913565"/>
<node TEXT="减少建立一些无效的连接" ID="ID_162811128" CREATED="1608273967433" MODIFIED="1608273995412"/>
<node TEXT="比如有一个客户端请求，在网络中长时间滞留，到达服务器时，对客户端来说已无建立连接的需要。此时服务器不经三次握手就建立连接，客户端也不会给服务器发送数据，服务器资源浪费了" ID="ID_1595252267" CREATED="1608274027201" MODIFIED="1608274254693"/>
</node>
<node TEXT=" 四次挥手" ID="ID_1915469749" CREATED="1608274268787" MODIFIED="1608274270132">
<node TEXT="概念" ID="ID_1897674344" CREATED="1608274312858" MODIFIED="1608274315366">
<node TEXT=" 当客户端和服务器通过三次握手建立了TCP连接以后，当数据传送完毕，肯定是要断开TCP连接的" ID="ID_1643364752" CREATED="1608274286059" MODIFIED="1608274287386"/>
<node TEXT=" 对于TCP的断开连接，用四次挥手" ID="ID_252018661" CREATED="1608274297122" MODIFIED="1608274306780"/>
<node TEXT="第一次挥手方可以是服务器或客户端" ID="ID_1438751637" CREATED="1608274646331" MODIFIED="1608274670063"/>
</node>
<node TEXT="第一次挥手" ID="ID_1716018301" CREATED="1608274598891" MODIFIED="1608274605116">
<node TEXT="主机1向主机2发FIN报文，Seq=X FIN=1" ID="ID_192151161" CREATED="1608274605410" MODIFIED="1610024221337"/>
<node TEXT="这表示主机1没有数据要发送给主机2，但是仍然可以接受数据" ID="ID_1280860779" CREATED="1610024244554" MODIFIED="1610024247127"/>
<node TEXT=" 主机1进入FIN_WAIT_1状态" ID="ID_263912259" CREATED="1608274743472" MODIFIED="1610024249738"/>
</node>
<node TEXT="第二次挥手" ID="ID_992128300" CREATED="1608274754887" MODIFIED="1608274760972">
<node TEXT=" 确认FIN 包，主机2向主机1回一个ACK报文段，ACK=1 ACKnum=X+1" ID="ID_1410573574" CREATED="1608274854702" MODIFIED="1610024465253"/>
<node TEXT="主机2告诉主机1，接受关闭请求，但还有可能要发送一些数据" ID="ID_138411657" CREATED="1610024280929" MODIFIED="1610024352005"/>
<node TEXT=" 主机1进入FIN_WAIT_2状态" ID="ID_1078567879" CREATED="1608274903813" MODIFIED="1610024284908"/>
</node>
<node TEXT="第三次挥手" ID="ID_885383540" CREATED="1608274968219" MODIFIED="1608274976221">
<node TEXT="主机2向主机1发送FIN报文段，Seq=Y FIN=1" ID="ID_17642732" CREATED="1608276162242" MODIFIED="1610024432755"/>
<node TEXT=" 主机2进入LAST_ACK状态；等待来自客户端的最后一个ACK" ID="ID_1299171938" CREATED="1608276178843" MODIFIED="1610024492681"/>
</node>
<node TEXT="第四次挥手" ID="ID_715955212" CREATED="1608276237897" MODIFIED="1608276241555">
<node TEXT=" 主机1向主机2发送ACK报文段，ACK=1，ACKnum=y+1" ID="ID_1892396786" CREATED="1608276286505" MODIFIED="1610024511461"/>
<node TEXT=" 主机1进入TIME_WAIT状态" ID="ID_1003034868" CREATED="1608276305912" MODIFIED="1608276313681"/>
<node TEXT=" 主机2收到主机1的ACK报文段以后，就关闭连接" ID="ID_785860706" CREATED="1608276314400" MODIFIED="1608276315680"/>
<node TEXT=" 主机1等待2MSL后依然没有收到回复，则证明Server端已正常关闭，主机1也可以关闭连接了" ID="ID_1184521591" CREATED="1608276331592" MODIFIED="1608276342952"/>
</node>
</node>
<node TEXT=" TCP终止连接为什么要四次挥手" ID="ID_1086395348" CREATED="1608276905545" MODIFIED="1610024572196">
<node TEXT=" TCP协议是一种面向连接的、可靠的、基于字节流的运输层通信协议，TCP是全双工模式" ID="ID_1817298053" CREATED="1608276913875" MODIFIED="1608276931831"/>
<node TEXT="  主机1发出FIN报文段时，只是表示主机1已经没有数据要发送了，主机1告诉主机2，它的数据已经全部发送完毕了；但是，这个时候主机1还是可以接受来自主机2的数据" ID="ID_1564538957" CREATED="1608276955348" MODIFIED="1608276956534"/>
<node TEXT=" 当主机2返回ACK报文段时，表示它已经知道主机1没有数据发送了，但是主机2还是可以发送数据到主机1的" ID="ID_705243253" CREATED="1608276957299" MODIFIED="1608276964046"/>
<node TEXT="  当主机2也发送了FIN报文段时，这个时候就表示主机2也没有数据要发送了，就会告诉主机1，我也没有数据要发送了，之后彼此就会愉快的中断这次TCP连接" ID="ID_992955954" CREATED="1608276972419" MODIFIED="1608276973481"/>
</node>
<node TEXT=" 为什么要等待2MSL" ID="ID_1922442975" CREATED="1608276983723" MODIFIED="1608276985748">
<node TEXT=" MSL" ID="ID_741159066" CREATED="1608277149034" MODIFIED="1608277162354">
<node TEXT="报文段最大生存时间" ID="ID_510714221" CREATED="1608277159009" MODIFIED="1608277183755"/>
<node TEXT=" 它是任何报文段被丢弃前在网络内的最长时间" ID="ID_41422515" CREATED="1608277180233" MODIFIED="1608277181904"/>
<node TEXT=" 原因" ID="ID_103023892" CREATED="1608277188489" MODIFIED="1608277189300">
<node TEXT=" 保证TCP协议的全双工连接能够可靠关闭" ID="ID_243942984" CREATED="1608277192593" MODIFIED="1608277193416"/>
<node TEXT=" 保证这次连接的重复数据段从网络中消失" ID="ID_18241880" CREATED="1608277196593" MODIFIED="1608277197702"/>
</node>
</node>
<node TEXT=" 第一点" ID="ID_803469520" CREATED="1608277233347" MODIFIED="1608277234335">
<node TEXT="主机1发完ACK，不代表主机2一定能收到" ID="ID_1212046367" CREATED="1608277686327" MODIFIED="1608277723536"/>
<node TEXT="主机2如果没有收到ACK，会在超时之后继续发送FIN" ID="ID_490681522" CREATED="1608277716063" MODIFIED="1608277796679"/>
<node TEXT="因此主机1不能发完ACK直接CLOSED" ID="ID_783849536" CREATED="1608277507161" MODIFIED="1608277824664"/>
<node TEXT="主机1等待2MSL，确保主机2可以收到ACK" ID="ID_1579893523" CREATED="1608277841006" MODIFIED="1608277872211"/>
</node>
<node TEXT=" 第二点" ID="ID_380469633" CREATED="1608277237969" MODIFIED="1608277238917">
<node TEXT=" 如果主机1直接CLOSED，然后又再向主机2发起一个新连接，不能保证这个新连接与刚关闭的连接的端口号是不同的" ID="ID_1539956586" CREATED="1608277910814" MODIFIED="1608277933241"/>
<node TEXT="  假设新连接和已经关闭的老连接端口号是一样的，如果前一次连接的某些数据仍然滞留在网络中，这些延迟数据在建立新连接之后才到达主机2，由于新连接和老连接的端口号是一样的，TCP协议就认为那个延迟的数据是属于新连接的，这样就和真正的新连接的数据包发生混淆了" ID="ID_1844549131" CREATED="1608277960054" MODIFIED="1608277961451"/>
<node TEXT=" 在TIME_WAIT状态等待2倍MSL，这样可以保证本次连接的所有数据都从网络中消失" ID="ID_1859912696" CREATED="1608277982461" MODIFIED="1608277983659"/>
</node>
</node>
<node TEXT=" TCP流量控制" ID="ID_929649343" CREATED="1608277996469" MODIFIED="1608277998015">
<node TEXT="概念" ID="ID_1978758306" CREATED="1608278043397" MODIFIED="1608278047975">
<node TEXT=" 如果发送方把数据发送得过快，接收方可能会来不及接收，这就会造成数据的丢失" ID="ID_616504570" CREATED="1608278050181" MODIFIED="1608278053248"/>
<node TEXT=" 所谓流量控制就是让发送方的发送速率不要太快，要让接收方来得及接收" ID="ID_1789366254" CREATED="1608278058740" MODIFIED="1608278059880"/>
<node TEXT=" 利用滑动窗口机制可以很方便地在TCP连接上实现对发送方的流量控制" ID="ID_818395230" CREATED="1608278152148" MODIFIED="1608278153374"/>
</node>
</node>
</node>
</node>
</map>
