<map version="freeplane 1.8.0">
<!--To view this file, download free mind mapping software Freeplane from http://freeplane.sourceforge.net -->
<node TEXT="MMO技能系统" LOCALIZED_STYLE_REF="AutomaticLayout.level.root" FOLDED="false" ID="ID_1723255651" CREATED="1283093380553" MODIFIED="1611025792464" STYLE="bubble">
<font NAME="Noto Sans S Chinese Light" SIZE="14"/>
<hook NAME="MapStyle" zoom="1.077">
    <properties fit_to_viewport="false" show_icon_for_attributes="true" show_note_icons="true" edgeColorConfiguration="#808080ff,#ff0000ff,#0000ffff,#00ff00ff,#ff00ffff,#00ffffff,#7c0000ff,#00007cff,#007c00ff,#7c007cff,#007c7cff,#7c7c00ff"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" STYLE="oval" UNIFORM_SHAPE="true" VGAP_QUANTITY="24.0 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="24"/>
<stylenode LOCALIZED_TEXT="styles.predefined" POSITION="right" STYLE="bubble" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<stylenode LOCALIZED_TEXT="default" ICON_SIZE="12.0 pt" COLOR="#000000" STYLE="combined" BORDER_WIDTH="3.0 px" MAX_WIDTH="10.1 cm" MIN_WIDTH="0.0 cm" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false" ITALIC="false"/>
<edge STYLE="sharp_bezier" WIDTH="7"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.attributes" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note" COLOR="#000000" BACKGROUND_COLOR="#ffffff" TEXT_ALIGN="LEFT" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.floating" VGAP_QUANTITY="6.8999999999999995 pt">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" POSITION="right" STYLE="bubble" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<stylenode LOCALIZED_TEXT="styles.ok" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="button_ok"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.needs_action" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="messagebox_warning"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.floating_node" VGAP_QUANTITY="6.8999999999999995 pt">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.topic" COLOR="#18898b" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subtopic" COLOR="#cc3300" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subsubtopic" COLOR="#669900" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.connection" COLOR="#606060" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.important" COLOR="#ff0000" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="yes"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.question" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="help"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.key" COLOR="#996600" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="password"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.idea" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="idea"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.note" COLOR="#990000" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.date" COLOR="#0033ff" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="calendar"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.website" COLOR="#006633" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.list" COLOR="#cc6600" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="list"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.quotation" COLOR="#338800" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.definition" COLOR="#666600" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.description" COLOR="#996600" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.pending" COLOR="#b3b95c" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode TEXT="代码" COLOR="#c0fdce" BACKGROUND_COLOR="#000000" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" POSITION="right" STYLE="bubble" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#000000" STYLE="oval" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<edge COLOR="#003333"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#0033ff" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<edge COLOR="#808080"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#003366" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<edge COLOR="#808080"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#990000" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#111111" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,5" COLOR="#006666" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,6" VGAP_QUANTITY="6.8999999999999995 pt">
<font SIZE="12"/>
</stylenode>
</stylenode>
</stylenode>
</map_styles>
</hook>
<hook NAME="AutomaticEdgeColor" COUNTER="102" RULE="ON_BRANCH_CREATION"/>
<hook NAME="accessories/plugins/AutomaticLayout.properties" VALUE="ALL"/>
<node TEXT=" 技能" POSITION="right" ID="ID_1571899872" CREATED="1611026737240" MODIFIED="1611026738646">
<edge COLOR="#007c7c"/>
<node TEXT=" 三个模块" ID="ID_1046994226" CREATED="1611026752401" MODIFIED="1611026753777">
<node ID="ID_1709659823" CREATED="1611026769555" MODIFIED="1611026769555"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      技能模块
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_167776468" CREATED="1611026769555" MODIFIED="1611026769555"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      buff模块
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_599483170" CREATED="1611026769557" MODIFIED="1611026769557"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      projectile（子弹）模块
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT=" 技能类型" ID="ID_948710446" CREATED="1611026787992" MODIFIED="1611026789450">
<node TEXT=" 被动类型的技能(PassiveAblity)" ID="ID_1918564374" CREATED="1611026794240" MODIFIED="1611026795390">
<node TEXT=" 被动技能一般会在技能初始化时生效" ID="ID_1105229006" CREATED="1611125310265" MODIFIED="1611125313916"/>
<node TEXT=" 技能初始化时会有抽象行为接口Ability::OnAbilityInit()" ID="ID_839273310" CREATED="1611125321904" MODIFIED="1611125323390"/>
</node>
<node TEXT=" 主动施法技能" ID="ID_554508537" CREATED="1611026801121" MODIFIED="1611026804115">
<node TEXT=" 普通攻击等一次性触发效果类技能（GeneralAbility）" ID="ID_814770823" CREATED="1611026820137" MODIFIED="1611026821188"/>
<node TEXT=" 引导类持续施法技能(ChannelAbility)" ID="ID_309981760" CREATED="1611026826848" MODIFIED="1611026827906"/>
<node TEXT="种类" ID="ID_680529772" CREATED="1611128855478" MODIFIED="1611128859057">
<node TEXT=" 技能释放时不需要目标即可释放（如群疗）" ID="ID_1434650899" CREATED="1611128870407" MODIFIED="1611128873672"/>
<node TEXT=" 技能释放时需要选定目标（单体指向性技能）" ID="ID_1801884997" CREATED="1611128880742" MODIFIED="1611128882249"/>
<node TEXT=" 技能释放时需要以指定地点为目标（常用于AOE技能）" ID="ID_175761428" CREATED="1611128889046" MODIFIED="1611128890430"/>
</node>
</node>
<node TEXT=" 开关类技能" ID="ID_295267465" CREATED="1611026833704" MODIFIED="1611026870534">
<node TEXT=" (ToggleAbility)点击技能开启/关闭效果" ID="ID_1892735400" CREATED="1611026855313" MODIFIED="1611026873077"/>
</node>
<node TEXT=" 激活类技能" ID="ID_879528759" CREATED="1611026861745" MODIFIED="1611026881624">
<node TEXT=" (ActivateAbility) 点下右键激活/停止" ID="ID_1852657300" CREATED="1611026877648" MODIFIED="1611026894963"/>
<node ID="ID_1435705178" CREATED="1611026896700" MODIFIED="1611026896700"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      一般是给普通攻击附加特殊效果
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT=" 普通施法技能阶段" ID="ID_1596042566" CREATED="1611129142452" MODIFIED="1611129191101">
<node TEXT="" ID="ID_488148204" CREATED="1611129198116" MODIFIED="1611129201234">
<hook URI="MMO技能系统_files/png_5505648986232302456.png" SIZE="0.86083215" NAME="ExternalObject"/>
</node>
<node TEXT=" 技能起手" ID="ID_1913185497" CREATED="1611129206589" MODIFIED="1611129219269">
<node TEXT=" 一般配置为播放动画" ID="ID_1872032097" CREATED="1611129260061" MODIFIED="1611129261009"/>
<node TEXT=" 执行完成后技能进入前摇阶段" ID="ID_21544067" CREATED="1611129275204" MODIFIED="1611129276749"/>
<node TEXT=" 技能开始转CD" ID="ID_1913368249" CREATED="1611129269580" MODIFIED="1611129270410"/>
</node>
<node TEXT=" 技能前摇" ID="ID_1364212489" CREATED="1611129219564" MODIFIED="1611129230181">
<node TEXT=" 技能前摇阶段不允许其他技能释放，除非技能可强制立即释放" ID="ID_680769873" CREATED="1611129296204" MODIFIED="1611129298016"/>
<node TEXT=" 前摇阶段提供一个配置时长,一般为动画抬手到攻击帧时长" ID="ID_993195982" CREATED="1611129342316" MODIFIED="1611129358939"/>
</node>
<node TEXT=" 施法" ID="ID_417532877" CREATED="1611129242820" MODIFIED="1611129247053">
<node TEXT=" 能具体逻辑执行阶段" ID="ID_217067627" CREATED="1611129396331" MODIFIED="1611129397374"/>
<node TEXT=" 通常会根据配置选择相应目标造成相应效果" ID="ID_1714790723" CREATED="1611129405669" MODIFIED="1611129406629"/>
</node>
<node TEXT=" 技能后摇" ID="ID_191454799" CREATED="1611129230396" MODIFIED="1611129235093">
<node TEXT=" 后摇阶段一般不能被其他技能打断，除非是连招或者强制立即释放类技能" ID="ID_1800412256" CREATED="1611129418940" MODIFIED="1611129420386"/>
</node>
<node TEXT=" 结束" ID="ID_1614067570" CREATED="1611129235309" MODIFIED="1611129240533"/>
</node>
<node TEXT=" 持续施法类技能阶段" ID="ID_793880317" CREATED="1611129448811" MODIFIED="1611129456381"/>
</node>
<node TEXT="buff" POSITION="right" ID="ID_521581770" CREATED="1611129534827" MODIFIED="1611129536997">
<edge COLOR="#7c7c00"/>
<node TEXT=" Buff系统的三个层次" ID="ID_927739896" CREATED="1611129634154" MODIFIED="1611129639691">
<node TEXT="" ID="ID_1468195465" CREATED="1611129646579" MODIFIED="1611129649765">
<hook URI="MMO技能系统_files/png_796457351117750007.png" SIZE="0.7748503" NAME="ExternalObject"/>
</node>
<node TEXT=" Buff" ID="ID_1748876300" CREATED="1611129659641" MODIFIED="1611129663277">
<node TEXT=" 所有Buff的基类，包含各类成员函数和基本接口" ID="ID_1115486148" CREATED="1611129667673" MODIFIED="1611129668873"/>
</node>
<node TEXT=" Modifier" ID="ID_1843161480" CREATED="1611129672841" MODIFIED="1611129673716">
<node TEXT=" 继承于Buff，代表这个Buff是一个修改器，它可以用来修改当前目标的各种属性，状态等等" ID="ID_1909390816" CREATED="1611129685217" MODIFIED="1611129686528"/>
<node TEXT=" 很多的Buff并不需要修改角色的属性状态，仅仅用来提供一段逻辑。那么如果它是一个Buff不是Modifier。这样区分可以节约性能" ID="ID_1027002715" CREATED="1611129722073" MODIFIED="1611129763203"/>
</node>
<node TEXT=" MotionModifier" ID="ID_80299663" CREATED="1611129767536" MODIFIED="1611129768670">
<node TEXT=" 继承于Modifier，代表此类Buff提供修改玩家运动效果的功能" ID="ID_390475904" CREATED="1611129780256" MODIFIED="1611129782605"/>
<node TEXT=" 因为牵涉到与运动组件的交互，所以抽象出一个新的类" ID="ID_1330723162" CREATED="1611129797280" MODIFIED="1611129798074"/>
</node>
</node>
<node TEXT="Buff的成员数据" ID="ID_1357660065" CREATED="1611129807345" MODIFIED="1611129815441">
<node ID="ID_621404888" CREATED="1611129875525" MODIFIED="1611129875525"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Caster（Buff施加者）
    </p>
  </body>
</html>
</richcontent>
<node TEXT=" 只有Caster相同，buff才能合并(buff层数增加)，因此Caster可以为空" ID="ID_774035411" CREATED="1611129938359" MODIFIED="1611130006144"/>
<node TEXT=" 当策划有一些玩法需求可以多人给BOSS叠Buff时就可以配置Buff的Caster为空" ID="ID_520568358" CREATED="1611130059206" MODIFIED="1611130064687"/>
</node>
<node ID="ID_181146020" CREATED="1611129875525" MODIFIED="1611129875525"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Parent（Buff当前挂载的目标）
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_613484790" CREATED="1611129875527" MODIFIED="1611129875527"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Ability(Buff由哪个技能创建)
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_853298353" CREATED="1611129875529" MODIFIED="1611129875529"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      BuffLayer（层数）
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_65533615" CREATED="1611129875530" MODIFIED="1611129875530"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      BuffLevel（等级）
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1032186723" CREATED="1611129875532" MODIFIED="1611129875532"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      BuffDuration（时长）
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_332966564" CREATED="1611129875533" MODIFIED="1611129875533"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      BuffTag
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_414898257" CREATED="1611129875534" MODIFIED="1611129875534"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      BuffImmuneTag（免疫BuffTag）
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_102683124" CREATED="1611129875535" MODIFIED="1611129875535"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Context(Buff创建时的一些相关上下文数据)
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="Buff执行流程" ID="ID_1856520519" CREATED="1611130142998" MODIFIED="1611130152352">
<node TEXT=" Buff创建前" ID="ID_1544133016" CREATED="1611130189621" MODIFIED="1611130223231">
<node TEXT=" 检查当前Buff是否可创建" ID="ID_752857805" CREATED="1611130196685" MODIFIED="1611130197713"/>
<node TEXT=" 一般主要是检测目标身上是否存在免疫该Buff的相关Buff，如果被免疫则不会创建该Buff" ID="ID_582335760" CREATED="1611130206525" MODIFIED="1611130207716"/>
</node>
<node TEXT=" Buff实例化之后" ID="ID_654282843" CREATED="1611130214461" MODIFIED="1611130225023">
<node TEXT=" 抛出一个OnBuffAwake事件" ID="ID_458322549" CREATED="1611130327214" MODIFIED="1611130328775"/>
<node TEXT=" 如果存在某种Buff的效果是：受到负面效果时，驱散当前所有负面效果，并给自己加一个护盾" ID="ID_1517658296" CREATED="1611130337573" MODIFIED="1611130338807"/>
<node TEXT=" 那么这个时候就需要监听BuffAwake事件了，此时会给自己加护盾，并且把所有负面Buff驱散" ID="ID_733486468" CREATED="1611130349005" MODIFIED="1611130351709"/>
<node TEXT=" 这意味着别一个Buff可能还未生效之前即销毁了（小心Buff的生命周期）" ID="ID_1461863973" CREATED="1611130375357" MODIFIED="1611130385854"/>
</node>
<node TEXT=" Buff生效时" ID="ID_940008318" CREATED="1611130396621" MODIFIED="1611130399142">
<node TEXT=" 加入到Buff容器后" ID="ID_197338301" CREATED="1611130417325" MODIFIED="1611130418664"/>
<node TEXT=" 我们提供给策划一个抽象接口OnBuffStart，由策划配置具体效果" ID="ID_738258425" CREATED="1611130423173" MODIFIED="1611130424508"/>
</node>
<node TEXT=" Buff添加时存在相同类型" ID="ID_1511195805" CREATED="1611130474405" MODIFIED="1611130482303">
<node TEXT=" Buff执行刷新流程（更新Buff层数，等级，持续时间等数据）" ID="ID_806045600" CREATED="1611130495453" MODIFIED="1611130496710"/>
<node TEXT=" 提供给策划一个抽象接口OnBuffRefresh，由策划配置具体效果" ID="ID_261181745" CREATED="1611130503421" MODIFIED="1611130504530"/>
</node>
<node TEXT=" Buff销毁前" ID="ID_1504826054" CREATED="1611130510845" MODIFIED="1611130511726">
<node TEXT=" 还未从Buff容器中移除" ID="ID_9843007" CREATED="1611130515614" MODIFIED="1611130516623"/>
<node TEXT=" 给策划一个抽象接口OnBuffRemove，由策划配置具体效果" ID="ID_419201628" CREATED="1611130523269" MODIFIED="1611130524148"/>
</node>
<node TEXT=" Buff销毁后" ID="ID_839992999" CREATED="1611130530255" MODIFIED="1611130531135">
<node TEXT=" 已从Buff容器中移除" ID="ID_1724891324" CREATED="1611130544253" MODIFIED="1611130545361"/>
<node TEXT=" 给策划一个抽象接口OnBuffDestroy，由策划配置具体效果" ID="ID_807793511" CREATED="1611130536716" MODIFIED="1611130537794"/>
</node>
<node TEXT=" Buff可选创建定时器触发间隔持续效果" ID="ID_6720110" CREATED="1611132484884" MODIFIED="1611132544829"/>
<node TEXT=" Buff可以通过请求改变运动来触发相关效果" ID="ID_1506850429" CREATED="1611132531301" MODIFIED="1611132537449"/>
</node>
<node TEXT=" Buff修改状态(ModifyState)" ID="ID_433513026" CREATED="1611132603331" MODIFIED="1611302165894">
<node TEXT=" Buff可以通过修改状态去影响角色行为逻辑" ID="ID_790755688" CREATED="1611132667387" MODIFIED="1611132669952"/>
<node TEXT=" 常见的状态" ID="ID_1901171492" CREATED="1611132674555" MODIFIED="1611132675453">
<node TEXT=" Stun眩晕状态" ID="ID_1815548909" CREATED="1611132681307" MODIFIED="1611132754207">
<node TEXT=" 目标不再响应任何操控" ID="ID_231611466" CREATED="1611132749235" MODIFIED="1611132750538"/>
</node>
<node TEXT=" Root（缠绕，又称定身——目标不响应移动请求，但是可以执行某些操作，如施放某些技能）" ID="ID_1128302801" CREATED="1611132689723" MODIFIED="1611132690637"/>
<node TEXT=" Silence （沉默——目标禁止施放技能）" ID="ID_335112004" CREATED="1611132694763" MODIFIED="1611132695569"/>
<node TEXT=" Invincible (无敌——几乎不受到所有的伤害和效果影响）" ID="ID_308574850" CREATED="1611132700387" MODIFIED="1611132701437"/>
<node TEXT=" Invisible (隐身——不可被其他人看见）" ID="ID_1623838852" CREATED="1611132707731" MODIFIED="1611132708692"/>
</node>
<node TEXT="不要将buff与运动、动画耦合在一块" ID="ID_192171856" CREATED="1611300745353" MODIFIED="1611300809536">
<node TEXT=" 眩晕状态" ID="ID_903524458" CREATED="1611300835229" MODIFIED="1611300840818">
<node TEXT="不一定要播眩晕动画" ID="ID_1058910380" CREATED="1611300841389" MODIFIED="1611301904999"/>
<node TEXT=" 不一定是敌人给我方加的控制Buff" ID="ID_738758413" CREATED="1611301923070" MODIFIED="1611301928313"/>
</node>
<node TEXT=" 塞恩开车，技能spell时加个buff" ID="ID_1689420816" CREATED="1611300897636" MODIFIED="1611301843306">
<node TEXT="该buff在眩晕的同时带位移突进效果" ID="ID_825154724" CREATED="1611301809286" MODIFIED="1611301846745"/>
<node TEXT=" 挂上Buff，技能施放后角色n秒内不响应其它技能" ID="ID_1143676769" CREATED="1611301831383" MODIFIED="1611301894109"/>
</node>
</node>
</node>
<node TEXT=" Buff修改属性(ModifyAttribute)" ID="ID_1926359651" CREATED="1611301935536" MODIFIED="1611302157717">
<node TEXT=" 玩家的属性划分为两层" ID="ID_18355247" CREATED="1611301977293" MODIFIED="1611301978269">
<node TEXT=" Core（核心层）" ID="ID_872250553" CREATED="1611301983590" MODIFIED="1611301985173">
<node TEXT=" 玩家各个其他模块的属性总和" ID="ID_1643589135" CREATED="1611302000996" MODIFIED="1611302001955"/>
</node>
<node TEXT=" External（外部层）" ID="ID_206683581" CREATED="1611301990405" MODIFIED="1611301991280">
<node TEXT=" Buff修改属性的总和" ID="ID_339586828" CREATED="1611302010499" MODIFIED="1611302011413"/>
</node>
</node>
<node TEXT=" 两者相加既为玩家的实时属性" ID="ID_1931368080" CREATED="1611302019540" MODIFIED="1611302020551"/>
</node>
<node TEXT="Buff修改运动(ModifyMotion)" ID="ID_1506476188" CREATED="1611302037244" MODIFIED="1611302176569">
<node TEXT="位移效果，如突进，翻滚，千斤坠，击退，击飞，拖拽，吸引等等" ID="ID_1249393482" CREATED="1611303273544" MODIFIED="1611303278094"/>
<node TEXT=" 各种复杂的运动打断效果" ID="ID_83841165" CREATED="1611303288712" MODIFIED="1611303290042">
<node TEXT="击飞时不能被击退" ID="ID_905808055" CREATED="1611303301930" MODIFIED="1611303320817"/>
<node TEXT=" 击飞过程又能被冰冻效果定住" ID="ID_969158646" CREATED="1611303315296" MODIFIED="1611303316511"/>
<node TEXT=" 破冰技能击退冰冻物体并解除冰冻效果" ID="ID_1400937469" CREATED="1611303337209" MODIFIED="1611303339282"/>
</node>
<node TEXT=" MotionModifier来与MovementComponent交互" ID="ID_1426319745" CREATED="1611303373457" MODIFIED="1611303374803">
<node TEXT="MovementComponent统一管理运动。接口CustomMotion，用来具体实现各种运动位移" ID="ID_1535008844" CREATED="1611303349632" MODIFIED="1611303478985"/>
<node TEXT="ModifyMotion提供接口ApplyMotion" ID="ID_92730748" CREATED="1611303479528" MODIFIED="1611303553608">
<node TEXT="向运动组件请求运动效果" ID="ID_226106074" CREATED="1611303554728" MODIFIED="1611303561175"/>
<node TEXT=" 参数" ID="ID_1459358810" CREATED="1611303565352" MODIFIED="1611303568257">
<node ID="ID_1754993717" CREATED="1611303578761" MODIFIED="1611303578761"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &nbsp;motionTypeId：运动类型id，配置项。包含运动位移参数及相关数据。
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1214309869" CREATED="1611303578761" MODIFIED="1611303578761"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      priority：运动优先级，每个运动都有优先级，低优先级不能打断高优先级。
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1803474124" CREATED="1611303578763" MODIFIED="1611303578763"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      forceInterrrupt：是否忽略优先级，强制打断当前的Motion
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT=" 通过这三个参数，就能实现各类打断" ID="ID_1384053362" CREATED="1611303622560" MODIFIED="1611303637270"/>
</node>
<node TEXT=" 击飞时不能被击退" ID="ID_490447184" CREATED="1611303877426" MODIFIED="1611303878633">
<node TEXT=" 比如说击退的运动优先级是100，击飞的运动优先级是200" ID="ID_1502712239" CREATED="1611303645200" MODIFIED="1611303646398"/>
<node TEXT=" 击飞时，击退buff运动优先级比较低，即不会执行，而直接销毁" ID="ID_175455657" CREATED="1611303653377" MODIFIED="1611304012259"/>
</node>
<node TEXT=" 击飞时被冰冻，且冻在半空中停止不动" ID="ID_1696390951" CREATED="1611303905305" MODIFIED="1611303906567">
<node TEXT=" 设计一个静止Buff" ID="ID_1313191083" CREATED="1611303923193" MODIFIED="1611303924133">
<node TEXT=" 运动优先级是300" ID="ID_1437337770" CREATED="1611303930040" MODIFIED="1611303958115"/>
<node TEXT=" 作用效果是速度设置为0，不受重力影响" ID="ID_1537533173" CREATED="1611303953024" MODIFIED="1611303954499"/>
<node TEXT=" 修改Stun状态并挂载冰冻特效" ID="ID_474633307" CREATED="1611303940496" MODIFIED="1611303941397"/>
</node>
<node TEXT=" 运动优先级比击飞高，buff效果生效" ID="ID_924113041" CREATED="1611304021393" MODIFIED="1611304052064"/>
</node>
<node TEXT="破冰技能击退冰冻物体并解除冰冻效果" ID="ID_701164263" CREATED="1611305442836" MODIFIED="1611305478553">
<node TEXT=" 破冰Buff有位移效果击退，击退的运动优先级还是100" ID="ID_1130953831" CREATED="1611305504877" MODIFIED="1611305580430"/>
<node TEXT=" forceInterrupt为true，破冰buff忽略优先级" ID="ID_1119425896" CREATED="1611305512260" MODIFIED="1611305549430"/>
<node TEXT=" ApplyMotion强制打断运动，冰冻Buff会触发OnMotionInterrupt回调，在此接口中冰冻Buff自我销毁即可" ID="ID_1642241059" CREATED="1611305898886" MODIFIED="1611305900270"/>
</node>
</node>
<node TEXT=" 位移效果实际上是State+Motion+Animation的组合" ID="ID_1451788727" CREATED="1611305957976" MODIFIED="1611305959234"/>
</node>
</node>
<node TEXT=" Buff监听事件" ID="ID_1109418389" CREATED="1611302323095" MODIFIED="1611302324266">
<node TEXT="其它模块执行逻辑抛出Buff监听的事件即可获得Buff功能上的扩展，不需要将buff与其它模块耦合" ID="ID_895834477" CREATED="1611302885696" MODIFIED="1611303073838"/>
<node TEXT=" 监听某个主动技能执行成功" ID="ID_866311370" CREATED="1611302445791" MODIFIED="1611302446750">
<node TEXT=" OnAbilityExecuted，常用于被动技能Buff" ID="ID_1280373493" CREATED="1611302474039" MODIFIED="1611302488440"/>
<node TEXT="  比如说角色施法时有10%概率获得30%的攻速提升。那么我们通常是Buff-A监听OnAbilityExcuted事件，然后10%概率添加Buff-B。Buff-B的作用是修改玩家属性，增加30%攻速" ID="ID_262415528" CREATED="1611302527454" MODIFIED="1611302528722"/>
</node>
<node TEXT=" 监听我方给目标造成了伤害" ID="ID_1075092418" CREATED="1611302545590" MODIFIED="1611302554681">
<node TEXT=" OnBeforeGiveDamage，OnAfterGiveDamage" ID="ID_281046428" CREATED="1611302569847" MODIFIED="1611302571188"/>
<node TEXT="  比如说对目标造成的伤害有10%概率无法被闪避，那么这个效果我们就可以通过监听OnBeforeGiveDamage的流程来实现。当执行伤害流程时，在计算伤害前我们抛出一个事件event。event里面有当前伤害数据。Buff在调用OnBeforeGiveDamage(event)时，修改event.Damage.DamageFlag |= DamageFlag_NotMiss，标注该伤害无法被闪避就行了" ID="ID_204622909" CREATED="1611302647959" MODIFIED="1611302649230"/>
</node>
<node TEXT=" 监听我方受到伤害时触发" ID="ID_1278104336" CREATED="1611302655950" MODIFIED="1611302656962">
<node TEXT=" OnBeforeTakeDamage，OnAfterTakeDamage" ID="ID_6067960" CREATED="1611302661847" MODIFIED="1611302662846"/>
<node TEXT=" 如护盾类Buff通常在OnBeforeTakeDamage的时候修改伤害数据" ID="ID_1834210070" CREATED="1611302694183" MODIFIED="1611302695427"/>
<node TEXT=" 又或者有某些Buff在受到伤害后可以触发各类效果就可以通过监听OnAfterTakeDamage事件来触发指定逻辑" ID="ID_1719368755" CREATED="1611302789665" MODIFIED="1611302790949"/>
</node>
<node TEXT=" 监听我方死亡时触发" ID="ID_1217044860" CREATED="1611302799743" MODIFIED="1611302800947">
<node TEXT=" OnBeforeDead，OnAfterDead" ID="ID_443587767" CREATED="1611302805511" MODIFIED="1611302806566"/>
<node TEXT=" 如免疫致死效果可以通过监听OnBeforeDead事件修改角色当前的Hp&gt;0，从而让角色提前退出死亡流程以避免死亡" ID="ID_660288132" CREATED="1611302821311" MODIFIED="1611302822385"/>
<node TEXT=" 死亡后触发额外效果，如爆炸或者召唤其他生物都可以通过监听OnAfterDead事件来执行" ID="ID_1166351603" CREATED="1611302830399" MODIFIED="1611302831204"/>
</node>
<node TEXT=" 监听我方击杀目标时触发" ID="ID_964847422" CREATED="1611302837679" MODIFIED="1611302838784">
<node TEXT=" OnKill事件" ID="ID_219808487" CREATED="1611302844511" MODIFIED="1611302845771"/>
<node TEXT="如当击杀目标后获得治疗效果回复即可通过监听到Kill事件时给自己加一个HOT的Buff来实现" ID="ID_1207935418" CREATED="1611302857336" MODIFIED="1611302861773"/>
</node>
</node>
</node>
<node TEXT=" 子弹(Projectile)" POSITION="right" ID="ID_1207438215" CREATED="1611305975527" MODIFIED="1611308105842">
<edge COLOR="#ff0000"/>
<node TEXT=" 两种类型子弹" ID="ID_980180676" CREATED="1611306090595" MODIFIED="1611306104859">
<node TEXT=" 追踪子弹(TrackingProjectile)" ID="ID_1092715432" CREATED="1611306110250" MODIFIED="1611306111148">
<node TEXT=" 子弹具有一个目标Target，它创建出来后以直线速度飞向指定目标" ID="ID_1767840843" CREATED="1611306127721" MODIFIED="1611306130592"/>
<node TEXT=" 命中目标或者到达目标位置后调用技能执行OnProjectileHit触发效果并自我销毁" ID="ID_46773421" CREATED="1611306149918" MODIFIED="1611306158931"/>
<node TEXT=" OnProjectileHit(projHandle, hitTarget, hitPosition)" ID="ID_767966553" CREATED="1611306167725" MODIFIED="1611306168809"/>
<node TEXT=" hitTarget可为空（目标有可能在飞行途中死亡或消失）" ID="ID_78925731" CREATED="1611306174741" MODIFIED="1611306177125"/>
</node>
<node TEXT=" 线性子弹(LinearProjectile)" ID="ID_320415204" CREATED="1611306114872" MODIFIED="1611306115813">
<node TEXT=" 子弹为等腰梯形检测盒子，无需目标，创建出来后沿着特定方向飞行一段距离" ID="ID_1662728396" CREATED="1611306210987" MODIFIED="1611306211966"/>
<node TEXT=" 飞行途中进行相交测试(SweepTest)，对检测范围内的目标调用技能执行OnProjectileHit触发效果" ID="ID_1423562949" CREATED="1611306225315" MODIFIED="1611306226305"/>
<node TEXT=" 到达目的地后触发OnProjectileHit(此时hitTarget为空）并自我销毁" ID="ID_275675696" CREATED="1611306235490" MODIFIED="1611306238307"/>
</node>
<node TEXT=" 为什么没有抛物线子弹" ID="ID_1800382354" CREATED="1611306266457" MODIFIED="1611543633197">
<node TEXT=" 这种像炮弹一样经过抛物线轨迹飞行，落地后会爆炸的子弹难道不是非常典型的子弹吗？然而这事实上并不需要用子弹来实现" ID="ID_1015468859" CREATED="1611543627210" MODIFIED="1611543629092"/>
<node TEXT=" 一个技能仅仅是N秒后指定地点造成范围伤害，不需要用子弹" ID="ID_1504296003" CREATED="1611543687353" MODIFIED="1611543695962"/>
<node TEXT="buff实现" ID="ID_1859671866" CREATED="1611543851600" MODIFIED="1611543856443">
<node TEXT="可以通过一个buff指定一个地点延迟触发伤害就解决了" ID="ID_1051125623" CREATED="1611543710585" MODIFIED="1611543943247"/>
<node TEXT=" Buff初始化时创建一个特效，由这个特效负责在客户端去模拟抛物线运动" ID="ID_1425991111" CREATED="1611543891935" MODIFIED="1611543895936"/>
<node TEXT=" Buff的持续时间为炮弹的生命周期" ID="ID_13305515" CREATED="1611543873327" MODIFIED="1611543877007"/>
<node TEXT=" Buff销毁时触发爆炸逻辑" ID="ID_1931499323" CREATED="1611543884583" MODIFIED="1611543885811"/>
</node>
<node TEXT="如何实现风墙打断？用直线子弹？" ID="ID_943580413" CREATED="1611543960743" MODIFIED="1611544026169"/>
</node>
</node>
<node TEXT=" 子弹的创建" ID="ID_998138424" CREATED="1611306280017" MODIFIED="1611306282312">
<node TEXT=" 创建追踪子弹" ID="ID_1164718913" CREATED="1611308146698" MODIFIED="1611308147665">
<node TEXT=" ProjectileManager::CreateTrackingProjectile(...)" ID="ID_1807120244" CREATED="1611308160625" MODIFIED="1611308162412"/>
<node TEXT=" 参数" ID="ID_1999243747" CREATED="1611541455224" MODIFIED="1611541456698">
<node ID="ID_111091433" CREATED="1611541511676" MODIFIED="1611541511676"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Owner：表示子弹的创建者
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1967827084" CREATED="1611541511676" MODIFIED="1611541511676"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Ability：表示子弹关联的技能
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_228610221" CREATED="1611541511678" MODIFIED="1611541511678"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      FromPosition：子弹的出发地点
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_614072294" CREATED="1611541511680" MODIFIED="1611541511680"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Target：子弹追踪的目标
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1887069913" CREATED="1611541511682" MODIFIED="1611541511682"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Speed：子弹的飞行速率
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT=" 子弹的位置更新" ID="ID_1469422486" CREATED="1611541914165" MODIFIED="1611541915106">
<node TEXT="" ID="ID_1779953364" CREATED="1611541850046" MODIFIED="1611541858095">
<hook URI="MMO技能系统_files/trackingProjectile.gif" SIZE="0.35991928" NAME="ExternalObject"/>
</node>
<node TEXT=" 追踪子弹基于直线速度飞向目标" ID="ID_1870553762" CREATED="1611541737879" MODIFIED="1611541738896"/>
</node>
</node>
<node TEXT=" 创建线性子弹" ID="ID_311715074" CREATED="1611308151692" MODIFIED="1611308152799">
<node TEXT=" ProjectileManager::CreateLinearProjectile(...)" ID="ID_884262529" CREATED="1611308170665" MODIFIED="1611308171884"/>
<node TEXT=" 参数" ID="ID_1607518104" CREATED="1611541494273" MODIFIED="1611541497535">
<node ID="ID_267598781" CREATED="1611541505637" MODIFIED="1611541505637"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Owner：表示子弹的创建者
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1725592328" CREATED="1611541505637" MODIFIED="1611541505637"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Ability：表示子弹关联的技能
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1847895992" CREATED="1611541505641" MODIFIED="1611541505641"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      FromPosition：子弹的出发地点
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1290635429" CREATED="1611541505643" MODIFIED="1611541505643"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Velocity：子弹的飞行速度和方向
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1532385138" CREATED="1611541505645" MODIFIED="1611541505645"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      StartWidth，EndWith，Distance：（等腰梯形检测盒）起点宽度，终点宽度，飞行距离
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_922959677" CREATED="1611541505647" MODIFIED="1611541505647"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      FilterTargetInfo：子弹筛选目标信息
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT=" 子弹的位置更新" ID="ID_611347448" CREATED="1611541923817" MODIFIED="1611541925003">
<node TEXT="" ID="ID_1409594494" CREATED="1611541874710" MODIFIED="1611541886626">
<hook URI="MMO技能系统_files/linearProjectile.gif" SIZE="0.34679466" NAME="ExternalObject"/>
</node>
<node TEXT=" 线性子弹基于插值更新位置" ID="ID_679700377" CREATED="1611541754399" MODIFIED="1611541755187"/>
</node>
</node>
<node TEXT=" 子弹的命中处理" ID="ID_388984463" CREATED="1611541942509" MODIFIED="1611541943366">
<node TEXT=" 由于子弹在创建时传入了Ability参数，那么当子弹检测到命中目标后便可以通过调用GetAbility().OnProjectileHit" ID="ID_463681371" CREATED="1611541994197" MODIFIED="1611541996475"/>
<node TEXT=" OnProjectileHit(projHandle, hitTarget, hitPosition)在技能模板执行逻辑" ID="ID_1484707380" CREATED="1611542100620" MODIFIED="1611542112053"/>
<node TEXT=" 在技能模块中通过执行策划配置来实现各种效果" ID="ID_1229095806" CREATED="1611542087669" MODIFIED="1611542089069"/>
<node TEXT=" 子弹本身是没有任何特殊逻辑的，它只有位置更新，检查命中目标和是否结束并销毁这几个简单的功能" ID="ID_701860549" CREATED="1611542068092" MODIFIED="1611542069199"/>
<node TEXT=" 子弹的逻辑运行部分，是完全运行在服务端的，客户端并不会收到任何消息" ID="ID_935609946" CREATED="1611542148267" MODIFIED="1611542157742"/>
</node>
<node TEXT=" 子弹的客户端表现" ID="ID_1286792902" CREATED="1611541991289" MODIFIED="1611542168838">
<node TEXT=" 通过特效系统来向客户端展现绚丽的子弹效果" ID="ID_1042246461" CREATED="1611542205330" MODIFIED="1611542206346"/>
<node TEXT=" 整个客户端其实是没有Projectile这个概念的，有的只是各种各样的自定义特效" ID="ID_1129020959" CREATED="1611542213386" MODIFIED="1611542214374"/>
</node>
<node TEXT="例" ID="ID_909810954" CREATED="1611544064270" MODIFIED="1611544066608">
<node TEXT="闪电链技能的实现" ID="ID_747248854" CREATED="1611544066918" MODIFIED="1611544076184">
<node TEXT=" 技能在施法（Spell）的时候的创建一个追踪子弹，目标为当前技能选择的目标A，同时告诉客户端创建一个闪电特效" ID="ID_274855361" CREATED="1611544537788" MODIFIED="1611544645822"/>
<node TEXT=" 客户端设置闪电特效的初始点为角色的手，终点为目标A的胸口受击点，服务器记录特效的Handle用于在后面更新闪电特效的位置" ID="ID_1054188134" CREATED="1611544680771" MODIFIED="1611544682385"/>
<node TEXT=" 当追踪子弹命中目标A的时候，再创建一个新的追踪子弹，设置目标B，再通知客户端创建特效" ID="ID_761651608" CREATED="1611544730876" MODIFIED="1611544790287"/>
</node>
<node TEXT="把人钩回来的技能" ID="ID_1241207170" CREATED="1611544942922" MODIFIED="1611544972341">
<node TEXT=" 技能施法时" ID="ID_1765033312" CREATED="1611545015842" MODIFIED="1611545017367">
<node TEXT=" 创建线性子弹向前方运动" ID="ID_508682397" CREATED="1611545022777" MODIFIED="1611545023971"/>
<node TEXT=" 创建一个钩子特效设置起始点为手，目标点为子弹终点位置" ID="ID_1798149603" CREATED="1611545040099" MODIFIED="1611545041095"/>
<node TEXT=" 钩子以一定速度向前飞行" ID="ID_1638748849" CREATED="1611545045658" MODIFIED="1611545046480"/>
</node>
<node TEXT=" 线性子弹飞行到终点" ID="ID_493139300" CREATED="1611545058859" MODIFIED="1611545059926">
<node TEXT="无命中单位" ID="ID_1878726790" CREATED="1611545075122" MODIFIED="1611545079548">
<node TEXT=" 立即销毁该子弹并创建一个新的线性子弹，初始点为终点位置，目标点为施法者位置" ID="ID_534943624" CREATED="1611545095729" MODIFIED="1611545269033"/>
<node TEXT=" 更新钩子特效的速度方向为返回方向" ID="ID_1263699300" CREATED="1611545108561" MODIFIED="1611545109493"/>
<node TEXT=" 当线性子弹回到施法者位置后触发OnProjectileHit，此时手动Destroy钩子特效" ID="ID_1995830030" CREATED="1611545119562" MODIFIED="1611545120467"/>
</node>
<node TEXT=" 有命中单位" ID="ID_878454958" CREATED="1611545065793" MODIFIED="1611545074940">
<node TEXT="在无命中单位的基础上" ID="ID_1818227728" CREATED="1611545210283" MODIFIED="1611545222893"/>
<node TEXT=" 命中时给命中目标添加一个拖拽Buff" ID="ID_1958023283" CREATED="1611545146905" MODIFIED="1611545306909"/>
<node TEXT=" Buff修改目标的运动，让目标沿直线向施法者的位置移动，速度和钩子飞行速度一致，到达目标点后Buff自我销毁" ID="ID_161934652" CREATED="1611545161361" MODIFIED="1611545165955"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node TEXT=" 特效" POSITION="right" ID="ID_1979036895" CREATED="1611555436774" MODIFIED="1611555440596">
<edge COLOR="#0000ff"/>
<node TEXT="信息同步" ID="ID_541154335" CREATED="1611555548723" MODIFIED="1611555554623">
<node TEXT=" 在游戏服务器中，通常有两种方式将服务器信息同步给客户端。一种是发送事件，另一种是同步状态。" ID="ID_1397948612" CREATED="1611555559572" MODIFIED="1611555560478"/>
<node TEXT=" 对于特效系统来说，一般我们只需要通过发送事件告知相关客户端即可" ID="ID_698005157" CREATED="1611555565509" MODIFIED="1611555567140"/>
</node>
<node TEXT="  特效的创建" ID="ID_430373050" CREATED="1611555594747" MODIFIED="1611555596157">
<node TEXT=" 特效即可以由服务器创建，也可以由本地客户端创建" ID="ID_311790541" CREATED="1611555604452" MODIFIED="1611555605497"/>
<node TEXT=" 统一通过EffectManager来管理特效的创建和销毁" ID="ID_840741710" CREATED="1611555617276" MODIFIED="1611555618486"/>
<node TEXT=" 特效创建时能被周围玩家看见" ID="ID_622952883" CREATED="1611555746371" MODIFIED="1611555748348">
<node TEXT=" EffectManager::CreateEffect" ID="ID_1149159197" CREATED="1611555787332" MODIFIED="1611555788616"/>
<node TEXT=" 参数" ID="ID_1971100120" CREATED="1611555794403" MODIFIED="1611555798271">
<node ID="ID_1908903579" CREATED="1611555810951" MODIFIED="1611555810951"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      effectTypeId: 特效类型id，关联配置表相关项。
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="controlPoints：特效相关控制点数据" ID="ID_1989570401" CREATED="1611555810951" MODIFIED="1611555824402"/>
<node TEXT="controlEntities：特效相关单位控制数据" ID="ID_262737226" CREATED="1611555810952" MODIFIED="1611555827750"/>
<node TEXT="bRetain：EffectManager是否持有特效" ID="ID_1672737098" CREATED="1611555810955" MODIFIED="1611555832066"/>
<node ID="ID_540971122" CREATED="1611555810957" MODIFIED="1611555810957"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      effectHandle: 当bRetain=true时，创建特效后返回有效句柄，数值大于0，供游戏逻辑使用控制特效行为。
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT=" 特效创建时仅仅能被玩家自己看到" ID="ID_1223347543" CREATED="1611555748756" MODIFIED="1611555754716">
<node TEXT=" EffectManager::CreateEffectForPlayer" ID="ID_508179944" CREATED="1611555854259" MODIFIED="1611555855462"/>
<node TEXT=" 参数" ID="ID_826833321" CREATED="1611555856066" MODIFIED="1611555859053">
<node ID="ID_1325738909" CREATED="1611555937102" MODIFIED="1611555937102"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &nbsp;effectTypeId
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1498452489" CREATED="1611555937102" MODIFIED="1611555937102"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &nbsp;controlPoints
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_177665368" CREATED="1611555937104" MODIFIED="1611555937104"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &nbsp;controlEntities
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_343074789" CREATED="1611555937107" MODIFIED="1611555937107"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &nbsp;bRetain
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT=" player 特效创建于指定玩家客户端" ID="ID_1888413900" CREATED="1611555937108" MODIFIED="1611555957809"/>
</node>
</node>
</node>
<node TEXT=" 特效的控制" ID="ID_1545243184" CREATED="1611556105986" MODIFIED="1611556107726">
<node TEXT="位置" ID="ID_1553528558" CREATED="1611556127753" MODIFIED="1611556131228">
<node ID="ID_779497221" CREATED="1611556140027" MODIFIED="1611556140027"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &nbsp;特效可能是被挂载在某个单位身上
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1502810057" CREATED="1611556140027" MODIFIED="1611556140027"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &nbsp;也有可能创建在指定位置上
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT=" ControlPoint接口" ID="ID_1503648349" CREATED="1611556534688" MODIFIED="1611556539202">
<node TEXT=" 特效相关控制点数据" ID="ID_803102017" CREATED="1611556628792" MODIFIED="1611556630948"/>
</node>
<node TEXT=" ControlEntity接口" ID="ID_1360037657" CREATED="1611556539320" MODIFIED="1611556556001">
<node TEXT=" 特效相关单位控制数据" ID="ID_575540432" CREATED="1611556636744" MODIFIED="1611556638015"/>
<node TEXT=" AttachType属性， 定义特效附加类型" ID="ID_519409294" CREATED="1611556688626" MODIFIED="1611556746867">
<node ID="ID_246702146" CREATED="1611556740019" MODIFIED="1611556740019"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Attach_AbsOrigin: 特效基于目标坐标创建。
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_951151471" CREATED="1611556740019" MODIFIED="1611556740019"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Attach_AbsOrigin_Follow: 特效基于目标坐标创建并跟随目标位置移动。
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_494462868" CREATED="1611556740022" MODIFIED="1611556740022"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Attach_Point: 特效基于目标挂点(attachName)位置创建，但不跟随目标。
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_213663070" CREATED="1611556740027" MODIFIED="1611556740027"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Attach_Point_Follow: 特效基于目标挂点(attachName)位置创建，跟随目标
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT=" 特效的生命周期" ID="ID_1616058950" CREATED="1611556510626" MODIFIED="1611556512200">
<node TEXT=" 在创建特效的参数中有一个bRetain参数，它主要关联特效的生命周期" ID="ID_1170116042" CREATED="1611556833799" MODIFIED="1611556834923"/>
<node TEXT="特效特征" ID="ID_1946336485" CREATED="1611556846576" MODIFIED="1611556853433">
<node TEXT=" 创建出来后就播放特效，过程中不再需要控制特效行为" ID="ID_1140757473" CREATED="1611556853977" MODIFIED="1611556863592"/>
<node TEXT=" 特效播完后需要销毁" ID="ID_939553116" CREATED="1611556874121" MODIFIED="1611556874986"/>
</node>
<node TEXT="引用计数管理创建，计数为0手动销毁" ID="ID_1426103783" CREATED="1611556932080" MODIFIED="1611556963818"/>
</node>
</node>
<node TEXT=" 运动" POSITION="right" ID="ID_1386061661" CREATED="1611556977831" MODIFIED="1611556982826">
<edge COLOR="#00ff00"/>
<node TEXT=" MMO游戏中的运动" ID="ID_643695548" CREATED="1611557214687" MODIFIED="1611557218568">
<node TEXT=" 一般不会采用完全基于动画RootMotion驱动的技术，有可能服务器甚至都不存在动画组件" ID="ID_12788294" CREATED="1611557224726" MODIFIED="1611557225903"/>
<node TEXT=" 有通过基于场景使用加速度或速度来驱动角色运动的实现方式" ID="ID_434538495" CREATED="1611557234520" MODIFIED="1611557276089"/>
<node TEXT=" 角色的运动统一通过CharacterMovementComponent来处理" ID="ID_388457391" CREATED="1611557035087" MODIFIED="1611557036310"/>
</node>
<node TEXT=" 执行流程" ID="ID_460261649" CREATED="1611557044376" MODIFIED="1611557045254">
<node TEXT=" 接收到按键或摇杆输入时，将InputVector的数据保存到运动组件中，运动组件下一次Update的时候处理输入数据" ID="ID_686407972" CREATED="1611557314687" MODIFIED="1611557326135"/>
<node TEXT="  当角色动画存在RootMotion时，动画组件保存RootMotion的数据，运动组件在Update的时候提取RootMotion的运动数据来处理当前运动" ID="ID_285838352" CREATED="1611557405108" MODIFIED="1611557405991"/>
<node TEXT=" 当角色存在技能运动效果时，处理方法类似RootMotion" ID="ID_1318609365" CREATED="1611557415860" MODIFIED="1611557417251"/>
</node>
<node TEXT="  运动片段" ID="ID_1516547040" CREATED="1611557438827" MODIFIED="1611557440242">
<node TEXT=" 组成" ID="ID_998195192" CREATED="1611557482043" MODIFIED="1611557484414">
<node TEXT=" 一个动画片段AnimationClip是由很多个关键帧KeyFrame组成" ID="ID_452140837" CREATED="1611557489353" MODIFIED="1611557490482"/>
<node TEXT=" 每个KeyFrame又包含每个骨头Bone的位置，旋转，缩放等信息" ID="ID_88036169" CREATED="1611557496938" MODIFIED="1611557498203"/>
<node TEXT=" 一个动画序列就是一步步播放KeyFrame并修改角色的位置旋转等信息的过程" ID="ID_1221931450" CREATED="1611557505443" MODIFIED="1611557506340"/>
</node>
</node>
<node TEXT=" 运动合并" ID="ID_197371295" CREATED="1611558348610" MODIFIED="1611558349969">
<node TEXT=" 当没有RootMotion和MotionClip的时候，玩家通过处理InputVector计算运动速度" ID="ID_582148918" CREATED="1611558472417" MODIFIED="1611558473399"/>
<node TEXT=" RootMotion和MotionClip都有两种方式影响运动" ID="ID_734495938" CREATED="1611558480168" MODIFIED="1611558481094">
<node TEXT=" 覆盖模式（Override)" ID="ID_1484314568" CREATED="1611558492912" MODIFIED="1611558493784">
<node TEXT=" 击退、击飞和翻滚" ID="ID_1660809665" CREATED="1611558506834" MODIFIED="1611558509902"/>
</node>
<node TEXT=" 叠加模式（Additvie)" ID="ID_1523138618" CREATED="1611558498361" MODIFIED="1611558499191">
<node TEXT="速度叠加" ID="ID_1575623131" CREATED="1611558671847" MODIFIED="1611558681106"/>
</node>
</node>
</node>
<node TEXT=" 运动同步" ID="ID_1759292732" CREATED="1611558688478" MODIFIED="1611558689437">
<node TEXT=" 对于MotionClip的同步我们不能像特效那样直接采取事件通知方式" ID="ID_1233352568" CREATED="1611558741566" MODIFIED="1611558745250"/>
<node TEXT=" 需要通过状态去同步，这样玩家就不会出现因为丢失信息从而导致位置不同步的问题" ID="ID_1741436531" CREATED="1611558750847" MODIFIED="1611558751798"/>
</node>
</node>
</node>
</map>
