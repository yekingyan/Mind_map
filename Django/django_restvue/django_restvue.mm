<map version="freeplane 1.7.0">
<!--To view this file, download free mind mapping software Freeplane from http://freeplane.sourceforge.net -->
<node TEXT="django_restvue" LOCALIZED_STYLE_REF="AutomaticLayout.level.root" FOLDED="false" ID="ID_1723255651" CREATED="1283093380553" MODIFIED="1551186550185" STYLE="bubble">
<font NAME="Noto Sans S Chinese Light" SIZE="14"/>
<hook NAME="MapStyle" zoom="1.077">
    <properties show_icon_for_attributes="true" fit_to_viewport="false" show_note_icons="true" edgeColorConfiguration="#808080ff,#ff0000ff,#0000ffff,#00ff00ff,#ff00ffff,#00ffffff,#7c0000ff,#00007cff,#007c00ff,#7c007cff,#007c7cff,#7c7c00ff"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" STYLE="oval" UNIFORM_SHAPE="true" VGAP_QUANTITY="24.0 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="24"/>
<stylenode LOCALIZED_TEXT="styles.predefined" POSITION="right" STYLE="bubble" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<stylenode LOCALIZED_TEXT="default" ICON_SIZE="12.0 pt" COLOR="#000000" STYLE="combined" BORDER_WIDTH="3.0 px" MAX_WIDTH="10.1 cm" MIN_WIDTH="0.0 cm" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false" ITALIC="false"/>
<edge STYLE="sharp_bezier" WIDTH="7"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.attributes" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note" COLOR="#000000" BACKGROUND_COLOR="#ffffff" TEXT_ALIGN="LEFT" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.floating" VGAP_QUANTITY="6.8999999999999995 pt">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" POSITION="right" STYLE="bubble" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<stylenode LOCALIZED_TEXT="styles.ok" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="button_ok"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.needs_action" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="messagebox_warning"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.floating_node" VGAP_QUANTITY="6.8999999999999995 pt">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.topic" COLOR="#18898b" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subtopic" COLOR="#cc3300" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subsubtopic" COLOR="#669900" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.connection" COLOR="#606060" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.important" COLOR="#ff0000" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="yes"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.question" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="help"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.key" COLOR="#996600" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="password"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.idea" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="idea"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.note" COLOR="#990000" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.date" COLOR="#0033ff" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="calendar"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.website" COLOR="#006633" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.list" COLOR="#cc6600" VGAP_QUANTITY="6.8999999999999995 pt">
<icon BUILTIN="list"/>
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.quotation" COLOR="#338800" STYLE="fork" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false" ITALIC="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.definition" COLOR="#666600" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.description" COLOR="#996600" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12" BOLD="false"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.pending" COLOR="#b3b95c" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode TEXT="&#x4ee3;&#x7801;" COLOR="#c0fdce" BACKGROUND_COLOR="#000000" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" POSITION="right" STYLE="bubble" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#000000" STYLE="oval" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<edge COLOR="#003333"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#0033ff" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<edge COLOR="#808080"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#003366" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
<edge COLOR="#808080"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#990000" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#111111" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,5" COLOR="#006666" VGAP_QUANTITY="6.8999999999999995 pt">
<font NAME="Noto Sans S Chinese Light" SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,6" VGAP_QUANTITY="6.8999999999999995 pt">
<font SIZE="12"/>
</stylenode>
</stylenode>
</stylenode>
</map_styles>
</hook>
<hook NAME="AutomaticEdgeColor" COUNTER="125" RULE="ON_BRANCH_CREATION"/>
<hook NAME="accessories/plugins/AutomaticLayout.properties" VALUE="ALL"/>
<node TEXT="&#x72ec;&#x7acb;&#x4f7f;&#x7528;Django ORM" POSITION="right" ID="ID_928227116" CREATED="1551273918472" MODIFIED="1551273933422">
<edge COLOR="#7c007c"/>
<node TEXT="1.&#x73af;&#x5883;&#x53d8;&#x91cf;" ID="ID_721375336" CREATED="1551273987801" MODIFIED="1551274040544">
<node ID="ID_784933578" CREATED="1551273956162" MODIFIED="1551273976782"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">import </font></span>sys<br/><span style="color: #cc7832"><font color="#cc7832">import </font></span>os<br/><br/>pwd = os.path.dirname(os.path.realpath(__file__))<br/><span style="color: #808080"><font color="#808080">#  &#33719;&#21462;&#39033;&#30446;&#21517;&#30340;&#30446;&#24405;(&#24403;&#21069;&#22312;&#31532;&#20108;&#32423; ../..)<br/></font></span>sys.path.append(pwd+<span style="color: #6a8759"><font color="#6a8759">&quot;../..&quot;</font></span>)<br/>os.environ.setdefault(<span style="color: #6a8759"><font color="#6a8759">&quot;DJANGO_SETTINGS_MODULE&quot;</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">&quot;&#39033;&#30446;&#21517;.settings&quot;</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="2.&#x4f7f;&#x7528;django" ID="ID_1355446344" CREATED="1551274002470" MODIFIED="1551274043671">
<node ID="ID_660021120" CREATED="1551274077226" MODIFIED="1551274077226"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">import </font></span>django<br/>django.setup()<br/><br/><span style="color: #cc7832"><font color="#cc7832">from </font></span>goods.models <span style="color: #cc7832"><font color="#cc7832">import </font></span>Goods<span style="color: #cc7832"><font color="#cc7832">, </font></span>GoodsCategory<span style="color: #cc7832"><font color="#cc7832">, </font></span>GoodsImage</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="&#x8bbf;&#x95ee;media&#x4e2d;&#x7684;&#x8d44;&#x6e90;" POSITION="right" ID="ID_1243494581" CREATED="1551274134773" MODIFIED="1551274158545">
<edge COLOR="#007c7c"/>
<node TEXT="settings.py" ID="ID_849652189" CREATED="1551274259092" MODIFIED="1551274266611">
<node ID="ID_389056677" CREATED="1551274267566" MODIFIED="1551274267566"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># &#35775;&#38382;media &#20013;&#30340;&#36164;&#28304;<br/></font></span>MEDIA_URL = <span style="color: #6a8759"><font color="#6a8759">'/media/'<br/></font></span>MEDIA_ROOT = os.path.join(BASE_DIR<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'media'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="urls.py" ID="ID_113646215" CREATED="1551274269356" MODIFIED="1551274273645">
<node ID="ID_423956069" CREATED="1551274463470" MODIFIED="1551274463470"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">from </font></span>.settings <span style="color: #cc7832"><font color="#cc7832">import </font></span>MEDIA_ROOT<br/><span style="color: #cc7832"><font color="#cc7832">from </font></span>django.views.static <span style="color: #cc7832"><font color="#cc7832">import </font></span>serve<br/><br/>urlpatterns = [<br/>    url(<span style="color: #6a8759"><font color="#6a8759">r'^admin/'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>xadmin.site.urls)<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font>url(<span style="color: #6a8759"><font color="#6a8759">r'^media/(?P&lt;path&gt;.*)$'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>serve<span style="color: #cc7832"><font color="#cc7832">, </font></span>{<span style="color: #6a8759"><font color="#6a8759">'document_root'</font></span>: MEDIA_ROOT})<br/>]<br/></pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="&#x5e8f;&#x5217;&#x5316;" POSITION="right" ID="ID_1300067172" CREATED="1551278090430" MODIFIED="1551278115093">
<edge COLOR="#7c7c00"/>
<node TEXT="json.dumps" ID="ID_74812335" CREATED="1551278316333" MODIFIED="1551278320863">
<node TEXT="json.dumps &#x65e0;&#x6cd5;&#x5bf9;datetime &#x548c; ImageFieldFile &#x7b49;&#x8fdb;&#x884c;&#x5e8f;&#x5217;&#x5316;" ID="ID_1007775559" CREATED="1551278115378" MODIFIED="1551278257090" MAX_WIDTH="11.5 cm"/>
<node ID="ID_1772764412" CREATED="1551278311172" MODIFIED="1551278311172"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">return </font></span>HttpResponse(json.dumps(json_list)<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">content_type</font></span>=<span style="color: #6a8759"><font color="#6a8759">'application/json'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="serializers" ID="ID_497905331" CREATED="1551278263462" MODIFIED="1551278273369">
<node ID="ID_1822528264" CREATED="1551278702877" MODIFIED="1551278702877"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt">goods = Goods.objects.all()[:<span style="color: #6897bb"><font color="#6897bb">10</font></span>]<br/><span style="color: #cc7832"><font color="#cc7832">from </font></span>django.core <span style="color: #cc7832"><font color="#cc7832">import </font></span>serializers<br/>json_data = serializers.serialize(<span style="color: #6a8759"><font color="#6a8759">'json'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>goods)<br/><span style="color: #cc7832"><font color="#cc7832">return </font></span>HttpResponse(json_data<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">content_type</font></span>=<span style="color: #6a8759"><font color="#6a8759">'application/json'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1957760705" CREATED="1551278759757" MODIFIED="1551278759757"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">return </font></span>JsonResponse(json_data)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="views" POSITION="right" ID="ID_1992130514" CREATED="1551365471550" MODIFIED="1551365475363">
<edge COLOR="#7c0000"/>
<node TEXT="APIView" ID="ID_1244808035" CREATED="1551363140840" MODIFIED="1551365477637">
<node TEXT="&#x6ce8;&#x610f;&#x8fd9;&#x4e2a;Response&#x662f;&#x5c5e;&#x4e8e;DRF&#x7684;" ID="ID_536739098" CREATED="1551363151988" MODIFIED="1551363247279"/>
<node ID="ID_1960124647" CREATED="1551363196290" MODIFIED="1551363196290"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsListView(APIView):<br/>    <span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">get</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #808080"><font color="#808080">request</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #808080"><font color="#808080">format=None</font></span>):<br/>        goods = Goods.objects.all()[:<span style="color: #6897bb"><font color="#6897bb">10</font></span>]<br/>        goods_serializer = GoodsSerializer(goods<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">many</font></span>=<span style="color: #cc7832"><font color="#cc7832">True</font></span>)<br/>        <span style="color: #cc7832"><font color="#cc7832">return </font></span>Response(goods_serializer.data)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="mixins&#x548c;generice" ID="ID_1852370447" CREATED="1551365478820" MODIFIED="1551366124884">
<node ID="ID_944573477" CREATED="1551366472383" MODIFIED="1551366472383"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsListView(mixins.ListModelMixin<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">                    </span></font>generics.GenericAPIView<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">                    </span></font>mixins.CreateModelMixin<span style="color: #cc7832"><font color="#cc7832">,</font></span>):<br/><br/>    <span style="color: #808080"><font color="#808080"># queryset &#21644; serializer_class &#26159;&#24517;&#39035;&#30340;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>queryset = Goods.objects.all()[:<span style="color: #6897bb"><font color="#6897bb">10</font></span>]<br/>    serializer_class = GoodsSerializer<br/><br/>    <span style="color: #808080"><font color="#808080"># &#21830;&#21697;&#21015;&#34920;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">get</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>request<span style="color: #cc7832"><font color="#cc7832">, </font></span>*args<span style="color: #cc7832"><font color="#cc7832">, </font></span>**kwargs):<br/>        <span style="color: #cc7832"><font color="#cc7832">return </font></span><span style="color: #94558d"><font color="#94558d">self</font></span>.list(request<span style="color: #cc7832"><font color="#cc7832">, </font></span>*args<span style="color: #cc7832"><font color="#cc7832">, </font></span>**kwargs)<br/><br/>    <span style="color: #808080"><font color="#808080"># &#26032;&#24314;&#21830;&#21697;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">post</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>request<span style="color: #cc7832"><font color="#cc7832">, </font></span>*args<span style="color: #cc7832"><font color="#cc7832">, </font></span>**kwargs):<br/>        <span style="color: #cc7832"><font color="#cc7832">return </font></span><span style="color: #94558d"><font color="#94558d">self</font></span>.create(request<span style="color: #cc7832"><font color="#cc7832">, </font></span>*args<span style="color: #cc7832"><font color="#cc7832">, </font></span>**kwargs)</pre>
  </body>
</html>
</richcontent>
</node>
<node TEXT="&#x7b49;&#x540c;&#x4e8e;" ID="ID_1318185258" CREATED="1551366772216" MODIFIED="1551366786201">
<node TEXT="&#x65b0;&#x7ee7;&#x627f;&#x7684;&#x4e24;&#x4e2a;&#x7c7b;&#x5b9e;&#x73b0;&#x7684;&#x5c31;&#x4e0a;&#x9762;&#x7684;&#x4ee3;&#x7801;" ID="ID_144806708" CREATED="1551366788020" MODIFIED="1551366937995"/>
<node ID="ID_1064547784" CREATED="1551366898505" MODIFIED="1551366898505"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsListView(generics.ListAPIView<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">                    </span></font>generics.CreateAPIView<span style="color: #cc7832"><font color="#cc7832">,</font></span>):<br/><br/>    <span style="color: #808080"><font color="#808080"># queryset &#21644; serializer_class &#26159;&#24517;&#39035;&#30340;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>queryset = Goods.objects.all()[:<span style="color: #6897bb"><font color="#6897bb">10</font></span>]<br/>    serializer_class = GoodsSerializer</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT=" site-packages\rest_framework\generics.py" ID="ID_206294713" CREATED="1551366967110" MODIFIED="1551366981822"/>
<node TEXT="generics.py&#x6709;&#x5f88;&#x591a;&#x53ef;&#x4f9b;&#x7ee7;&#x627f;&#x7684;view&#x7c7b;&#xff0c;&#x51cf;&#x5c11;&#x4ee3;&#x7801;&#x91cf;" ID="ID_562599707" CREATED="1551366984776" MODIFIED="1551367042417"/>
</node>
<node TEXT="viewsets &#x4e0e; router" ID="ID_1409139299" CREATED="1551451298694" MODIFIED="1551451331797">
<node TEXT="view.py" ID="ID_816464428" CREATED="1551451343032" MODIFIED="1551451357767">
<node ID="ID_1067042964" CREATED="1551451383140" MODIFIED="1551451383140"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsListViewSet(viewsets.GenericViewSet<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">                       </span></font>mixins.ListModelMixin<span style="color: #cc7832"><font color="#cc7832">,</font></span>):<br/><br/>    <span style="color: #808080"><font color="#808080"># queryset &#21644; serializer_class &#26159;&#24517;&#39035;&#30340;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>queryset = Goods.objects.all()<br/>    serializer_class = GoodsSerializer<br/></pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="urls.py" ID="ID_1380775609" CREATED="1551451347306" MODIFIED="1551451352838">
<node ID="ID_843438159" CREATED="1551451416794" MODIFIED="1551451416794"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">from </font></span>goods.views <span style="color: #cc7832"><font color="#cc7832">import </font></span>GoodsListViewSet<br/><span style="color: #cc7832"><font color="#cc7832">from </font></span>rest_framework.routers <span style="color: #cc7832"><font color="#cc7832">import </font></span>DefaultRouter<br/><br/>router = DefaultRouter()<br/><span style="color: #808080"><font color="#808080"># &#37197;&#32622;goods URL<br/></font></span>router.register(<span style="color: #6a8759"><font color="#6a8759">r'goods'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>GoodsListViewSet)<br/><span style="color: #808080"><font color="#808080"># &#31561;&#21516;&#19979;&#38754;<br/></font></span><font color="#808080"><span style="color: #808080"># goods_list = GoodsListViewSet.as_view({<br/></span><span style="color: #808080">#     'get': 'list',<br/></span><span style="color: #808080">#     # 'post': 'create',<br/></span><span style="color: #808080"># })</span></font></pre>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_965495797" CREATED="1551451427681" MODIFIED="1551451427681"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># &#21830;&#21697;&#21015;&#34920;&#39029;<br/></font></span><font color="#808080"><span style="color: #808080"># url(r'goods/$', goods_list, name='goods-list'),<br/></span><span style="color: #808080"><br/></span></font>url(<span style="color: #6a8759"><font color="#6a8759">r'^'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>include(router.urls))<span style="color: #cc7832"><font color="#cc7832">,</font></span></pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="view&#x4e4b;&#x95f4;&#x7684;&#x5173;&#x7cfb;" ID="ID_267652847" CREATED="1551451738103" MODIFIED="1551451751364">
<node TEXT="&#x9ad8;&#x7ea7;view" ID="ID_1383880867" CREATED="1551452978525" MODIFIED="1551452993545">
<node TEXT="GenericViewSet(viewsets)" ID="ID_1638381968" CREATED="1551451518157" MODIFIED="1551451703803"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      DRF
    </p>
  </body>
</html>
</richcontent>
<node TEXT="GenericAPIView" ID="ID_267511914" CREATED="1551451595755" MODIFIED="1551452564657"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      DRF
    </p>
  </body>
</html>
</richcontent>
<node TEXT="APIView(views)" ID="ID_1666996513" CREATED="1551451646838" MODIFIED="1551451715324"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      DRF
    </p>
  </body>
</html>
</richcontent>
<node TEXT="View" ID="ID_1492095025" CREATED="1551451675314" MODIFIED="1551451721974"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Django
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="&#x53ef;&#x4ee5;&#x7528;&#x5230;mixins&#x7684;&#x7c7b;&#x65b9;&#x6cd5;" ID="ID_1219376334" CREATED="1551452306764" MODIFIED="1551452322711"/>
<node TEXT=" (generics.py&#x4e0b;)" ID="ID_1083340955" CREATED="1551452568934" MODIFIED="1551452580444"/>
<node TEXT="RetrieveAPIView" ID="ID_1856809877" CREATED="1551452527139" MODIFIED="1551452584936"/>
</node>
<node ID="ID_892738726" CREATED="1551943351139" MODIFIED="1551943378814"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GenericViewSet(ViewSetMixin<span style="color: #cc7832"><font color="#cc7832">, </font></span>generics.GenericAPIView):<font color="#629755"><i><span style="color: #629755; font-style: italic"><br/></span><span style="color: #629755; font-style: italic">    </span></i></font><span style="color: #cc7832"><font color="#cc7832">pass</font></span></pre>
  </body>
</html>
</richcontent>
<richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      genericAPIView + viresers
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="&#x53ef;&#x4ee5;&#x5728;urls&#x4e0b;&#x9ed8;&#x8ba4;&#x8fdb;&#x884c;&#x7ed1;&#x5b9a;&#x6240;&#x6709;&#x8bf7;&#x6c42;&#x65b9;&#x6cd5;" ID="ID_527329050" CREATED="1551452722968" MODIFIED="1551452771355"/>
<node TEXT="&#x53ef;&#x6839;&#x636e;&#x8bf7;&#x6c42;&#x65b9;&#x6cd5;&#x52a8;&#x6001;&#x914d;&#x7f6e;serializers" ID="ID_1069341191" CREATED="1551452839101" MODIFIED="1551452884552"/>
</node>
<node TEXT="mixins" ID="ID_451912590" CREATED="1551451773882" MODIFIED="1551451781059">
<node TEXT="&#x5c06;http&#x65b9;&#x6cd5;&#x4e0e;&#x64cd;&#x4f5c;&#x6216;&#x54cd;&#x5e94;&#x7ed1;&#x5b9a;" ID="ID_1033499975" CREATED="1551451943150" MODIFIED="1551451973573">
<node TEXT="&#x5982;get &#x7528;listModelMixin &#x8fd4;&#x56de;List" ID="ID_1823478166" CREATED="1551451973825" MODIFIED="1551452005887"/>
</node>
<node TEXT="&#x53ef;&#x7ee7;&#x7eed;models" ID="ID_881545833" CREATED="1551451916853" MODIFIED="1551451927392">
<node TEXT="CreateModelMixin" ID="ID_1030302702" CREATED="1551451794523" MODIFIED="1551451816606"/>
<node TEXT="ListModelMixin" ID="ID_575034449" CREATED="1551451816941" MODIFIED="1551451826635">
<node TEXT="&#x5206;&#x9875;" ID="ID_952625977" CREATED="1551452034692" MODIFIED="1551452037805"/>
<node TEXT="&#x8fc7;&#x6ee4;" ID="ID_17603651" CREATED="1551452028270" MODIFIED="1551452034401"/>
<node TEXT="&#x5217;&#x8868;" ID="ID_392373793" CREATED="1551452047673" MODIFIED="1551452049408"/>
</node>
<node TEXT="RetrieveModelMixin" ID="ID_207266900" CREATED="1551451826841" MODIFIED="1551451838299">
<node TEXT="&#x8be6;&#x60c5;" ID="ID_1088262361" CREATED="1551452051178" MODIFIED="1551452052927"/>
</node>
<node TEXT="UpdateModelMixin" ID="ID_483922430" CREATED="1551451839596" MODIFIED="1551451861615">
<node TEXT="&#x90e8;&#x5206;&#x66f4;&#x65b0;" ID="ID_677644858" CREATED="1551452078346" MODIFIED="1551452086705"/>
<node TEXT="&#x5168;&#x90e8;&#x66f4;&#x65b0;" ID="ID_1069007174" CREATED="1551452086903" MODIFIED="1551452092749"/>
</node>
<node TEXT="DestroyModelMixin" ID="ID_1772467339" CREATED="1551451847809" MODIFIED="1551451864090">
<node TEXT="&#x8fde;&#x63a5;delete&#x65b9;&#x6cd5;" ID="ID_1829843093" CREATED="1551452107755" MODIFIED="1551452117059"/>
</node>
</node>
</node>
</node>
</node>
<node TEXT=" serializers" POSITION="right" ID="ID_1196963503" CREATED="1551365414523" MODIFIED="1551365417349">
<edge COLOR="#00ffff"/>
<node TEXT="Serializer" ID="ID_1655492686" CREATED="1551364338992" MODIFIED="1551365434055">
<node TEXT="&#x4fdd;&#x5b58;&#x6570;&#x636e;" ID="ID_973438228" CREATED="1551363614919" MODIFIED="1551364450763">
<node TEXT="app\serializers.py" ID="ID_1366341581" CREATED="1551363815353" MODIFIED="1551363829898">
<node TEXT="&#x539f;&#x672c;&#x7684;create&#x51fd;&#x6570;" ID="ID_929754339" CREATED="1551363633327" MODIFIED="1551363643011">
<node TEXT="rest_framework\serializers.py" ID="ID_1438019220" CREATED="1551363705045" MODIFIED="1551363724048"/>
<node ID="ID_1753313481" CREATED="1551363702737" MODIFIED="1551363702737"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">create</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>validated_data):<br/>    <span style="color: #808080"><font color="#808080"># NotImplementedError&#65306; &#20989;&#25968;&#19981;&#21487;&#29992;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font><span style="color: #cc7832"><font color="#cc7832">raise </font></span><span style="color: #8888c6"><font color="#8888c6">NotImplementedError</font></span>(<span style="color: #6a8759"><font color="#6a8759">'`create()` must be implemented.'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x91cd;&#x8f7d;create&#x51fd;&#x6570;" ID="ID_1824597606" CREATED="1551363726696" MODIFIED="1551363741171">
<node ID="ID_682938753" CREATED="1551363767884" MODIFIED="1551363767884"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsSerializer(serializers.Serializer):<br/>    name = serializers.CharField(<span style="color: #aa4926"><font color="#aa4926">required</font></span>=<span style="color: #cc7832"><font color="#cc7832">True, </font></span><span style="color: #aa4926"><font color="#aa4926">max_length</font></span>=<span style="color: #6897bb"><font color="#6897bb">100</font></span>)<br/>    click_num = serializers.IntegerField(<span style="color: #aa4926"><font color="#aa4926">default</font></span>=<span style="color: #6897bb"><font color="#6897bb">0</font></span>)<br/>    goods_front_image = serializers.ImageField()<br/><br/>    <span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">create</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>validated_data):<br/>        <span style="color: #808080"><font color="#808080"># &#20889;&#20837;&#28385;&#36275;&#19978;&#38754;&#31867;&#21464;&#37327;&#30340;validate_data&#21040;&#25968;&#25454;&#24211;<br/></font></span><font color="#808080"><span style="color: #808080">        </span></font><span style="color: #cc7832"><font color="#cc7832">return </font></span>Goods.objects.create(**validated_data)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="app\views.py" ID="ID_572719970" CREATED="1551363838116" MODIFIED="1551363843689">
<node ID="ID_420635389" CREATED="1551364156085" MODIFIED="1551364156085"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsListView(APIView):<br/>    <span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">post</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>request<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #808080"><font color="#808080">format=None</font></span>):<br/>        serializer = GoodsSerializer(<span style="color: #aa4926"><font color="#aa4926">data</font></span>=request.data)<br/>        <span style="color: #cc7832"><font color="#cc7832">if </font></span>serializer.is_valid():<br/>            serializer.save()  <span style="color: #808080"><font color="#808080"># &#35843;&#29992;serializers&#20013;&#30340;create&#26041;&#27861;<br/></font></span><font color="#808080"><span style="color: #808080">            </span></font><span style="color: #cc7832"><font color="#cc7832">return </font></span>Response(serializer.data<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">status</font></span>=status.HTTP_201_CREATED)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="ModelSerializer" ID="ID_1625212960" CREATED="1551364459757" MODIFIED="1551365421783">
<node TEXT="&#x5b57;&#x6bb5;&#x5e8f;&#x5217;&#x5316;" ID="ID_1392373950" CREATED="1551364728654" MODIFIED="1551364741761">
<node ID="ID_501554448" CREATED="1551364712622" MODIFIED="1551364712622"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsSerializer(serializers.ModelSerializer):<br/>    <span style="color: #cc7832"><font color="#cc7832">class </font></span>Meta:<br/>        model = Goods<br/>        <span style="color: #808080"><font color="#808080"># &#25351;&#23450;&#21442;&#25968;&#65292; &#36890;&#36807;Goods&#30340;models&#20013;&#30340;&#23383;&#27573;&#20316;&#26144;&#23556;<br/></font></span><font color="#808080"><span style="color: #808080">        </span></font>fields = (<span style="color: #6a8759"><font color="#6a8759">'name'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'add_time'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'click_num'</font></span>)<br/>        <span style="color: #808080"><font color="#808080"># &#20063;&#21487;&#20197;&#25351;&#23450;&#25152;&#26377;<br/></font></span><font color="#808080"><span style="color: #808080">        # fields = '__all__'</span></font></pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x8054;&#x8868;&#x67e5;&#x8be2;" ID="ID_1524374427" CREATED="1551364788120" MODIFIED="1551364793808">
<node ID="ID_343327201" CREATED="1551365278510" MODIFIED="1551365278510"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>CategorySerializer(serializers.ModelSerializer):<br/>    <span style="color: #cc7832"><font color="#cc7832">class </font></span>Meta:<br/>        model = GoodsCategory<br/>        fields = <span style="color: #6a8759"><font color="#6a8759">'__all__'<br/></font></span><font color="#6a8759"><span style="color: #6a8759"><br/></span><span style="color: #6a8759"><br/></span></font><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsSerializer(serializers.ModelSerializer):<br/>    <span style="color: #808080"><font color="#808080"># &#29992;&#24207;&#21015;&#21270;&#30340;category&#26367;&#25442;&#40664;&#35748;&#30340;category<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>category = CategorySerializer()<br/><br/>    <span style="color: #cc7832"><font color="#cc7832">class </font></span>Meta:<br/>        model = Goods<br/>        <span style="color: #808080"><font color="#808080"># &#25351;&#23450;&#21442;&#25968;&#65292; &#36890;&#36807;Goods&#30340;models&#20013;&#30340;&#23383;&#27573;&#20316;&#26144;&#23556;<br/></font></span><font color="#808080"><span style="color: #808080">        # fields = ('name', 'add_time', 'click_num')<br/></span><span style="color: #808080">        # &#20063;&#21487;&#20197;&#25351;&#23450;&#25152;&#26377;<br/></span><span style="color: #808080">        </span></font>fields = <span style="color: #6a8759"><font color="#6a8759">'__all__'</font></span></pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="&#x5206;&#x9875;" POSITION="right" ID="ID_380476017" CREATED="1551367281343" MODIFIED="1551367283923">
<edge COLOR="#00007c"/>
<node TEXT="&#x65b9;&#x6cd5;&#x4e00;&#xff08;&#x5168;&#x5c40;&#xff09;" ID="ID_1468782578" CREATED="1551367285905" MODIFIED="1551369393602">
<node TEXT="&#x6539;settings.py" ID="ID_925790015" CREATED="1551367288096" MODIFIED="1551367298767">
<node ID="ID_1110768750" CREATED="1551368768532" MODIFIED="1551368768532"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># rest_framework&#35774;&#32622;<br/></font></span><font color="#808080"><span style="color: #808080"># &#21487;&#22312;&#28304;&#30721;&#30340;settings.py&#20013;&#25214;&#35774;&#32622;&#21464;&#37327;<br/></span></font>REST_FRAMEWORK = {<br/>    <span style="color: #808080"><font color="#808080"># &#35774;&#32622;&#40664;&#35748;&#20998;&#39029;&#22823;&#23567;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font><span style="color: #6a8759"><font color="#6a8759">'PAGE_SIZE'</font></span>: <span style="color: #6897bb"><font color="#6897bb">10</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span>}</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="&#x65b9;&#x6cd5;&#x4e8c;" ID="ID_425517136" CREATED="1551369377253" MODIFIED="1551369383998">
<node TEXT="&#x5728;views.py&#x4e2d;&#x5b9a;&#x4e49;&#x7c7b;" ID="ID_603619164" CREATED="1551369395400" MODIFIED="1551369410134">
<node ID="ID_974360305" CREATED="1551369773217" MODIFIED="1551766028610"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">from </font></span>rest_framework.pagination <span style="color: #cc7832"><font color="#cc7832">import </font></span>PageNumberPagination<br/><span style="color: #cc7832"><font color="#cc7832">class </font></span>StandardResultsSetPagination(PageNumberPagination):<br/>    page_size = <span style="color: #6897bb"><font color="#6897bb">10<br/></font></span><font color="#6897bb"><span style="color: #6897bb">    </span></font>page_size_query_param = <span style="color: #6a8759"><font color="#6a8759">'page_size'<br/></font></span><font color="#6a8759"><span style="color: #6a8759">    </span></font>max_page_size = <span style="color: #6897bb"><font color="#6897bb">100</font></span></pre>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_895409876" CREATED="1551369916892" MODIFIED="1551780950474"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsListView(generics.ListAPIView<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">                    </span></font>generics.CreateAPIView<span style="color: #cc7832"><font color="#cc7832">,</font></span>):<br/>    <span style="color: #808080"><font color="#808080"># &#23558;&#23450;&#20041;&#20998;&#39029;&#30340;&#31867;&#21152;&#20837;View&#20013;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>pagination_class = StandardResultsSetPagination<br/>    <span style="color: #808080"><font color="#808080"># queryset &#21644; serializer_class &#26159;&#24517;&#39035;&#30340;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>queryset = Goods.objects.all()<br/>    serializer_class = GoodsSerializer</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="&#x8bf7;&#x6c42;&#x4e0e;&#x54cd;&#x5e94;" POSITION="right" ID="ID_290675125" CREATED="1551455841210" MODIFIED="1551455852164">
<edge COLOR="#007c7c"/>
<node TEXT="request" ID="ID_760496087" CREATED="1551453137324" MODIFIED="1551455856167">
<node TEXT="DRF&#x7684;request&#x5728;Django&#x7684;HTTPrequest&#x4e0a;&#x8fdb;&#x884c;&#x4e86;&#x6269;&#x5145;" ID="ID_934744535" CREATED="1551453140495" MODIFIED="1551453605633"/>
<node TEXT=".data" ID="ID_1742337238" CREATED="1551453623709" MODIFIED="1551453627296">
<node TEXT="post&#x3001;put &#x3001;patch&#x65b9;&#x6cd5;&#x4e0b;" ID="ID_1174611077" CREATED="1551453636659" MODIFIED="1551453727562"/>
<node TEXT="request.data" ID="ID_487470650" CREATED="1551453649586" MODIFIED="1551453734579"/>
<node TEXT="request.FILES" ID="ID_333299457" CREATED="1551453734794" MODIFIED="1551453740273"/>
</node>
<node TEXT=".query_params" ID="ID_777937274" CREATED="1551454089162" MODIFIED="1551454095840">
<node TEXT=" get&#x7684;&#x8bf7;&#x6c42;&#x53c2;&#x6570;" ID="ID_436224634" CREATED="1551454104725" MODIFIED="1551454119258"/>
</node>
<node TEXT=".parsers" ID="ID_1989322398" CREATED="1551454130657" MODIFIED="1551454136832">
<node TEXT="&#x89e3;&#x6790;&#x4f20;&#x8fc7;&#x6765;&#x7684;&#x6570;&#x636e;" ID="ID_561330511" CREATED="1551454167716" MODIFIED="1551454181633"/>
<node TEXT="JSON" ID="ID_363073566" CREATED="1551454181870" MODIFIED="1551454186852"/>
<node TEXT="form" ID="ID_410823797" CREATED="1551454187559" MODIFIED="1551454190869"/>
<node TEXT="MultiPart" ID="ID_1299132763" CREATED="1551454219321" MODIFIED="1551454226510">
<node TEXT="&#x5bcc;&#x6587;&#x672c;&#x6846;" ID="ID_331322553" CREATED="1551454226936" MODIFIED="1551454234945"/>
</node>
<node TEXT="fileUpload" ID="ID_630339611" CREATED="1551454191197" MODIFIED="1551454201284"/>
</node>
<node TEXT=".user" ID="ID_870957739" CREATED="1551454257208" MODIFIED="1551454261569">
<node TEXT="&#x5f53;&#x524d;&#x7528;&#x6237;" ID="ID_949729077" CREATED="1551454262073" MODIFIED="1551454265823"/>
</node>
</node>
<node TEXT="Response" ID="ID_1773201121" CREATED="1551454280722" MODIFIED="1551455853957">
<node TEXT="&#x4f5c;&#x4e00;&#x4e2a;&#x5224;&#x65ad;&#xff0c;&#x8fd4;&#x56de;Json&#x6216;html" ID="ID_540795554" CREATED="1551454315773" MODIFIED="1551454336731"/>
<node TEXT="&#x53c2;&#x6570;" ID="ID_1836262973" CREATED="1551454366713" MODIFIED="1551454371221">
<node TEXT="data" ID="ID_606741028" CREATED="1551454371460" MODIFIED="1551454373980">
<node TEXT="&#x8fd4;&#x56de;&#x7684;&#x6570;&#x636e;" ID="ID_365641960" CREATED="1551454374190" MODIFIED="1551454378263"/>
</node>
<node TEXT="status" ID="ID_778830443" CREATED="1551454380259" MODIFIED="1551454383540">
<node TEXT="status code" ID="ID_120037011" CREATED="1551454383825" MODIFIED="1551454395500"/>
</node>
<node TEXT="template_name" ID="ID_789407285" CREATED="1551454397343" MODIFIED="1551454403493">
<node TEXT="html render" ID="ID_1978132038" CREATED="1551454417274" MODIFIED="1551454427152"/>
</node>
<node TEXT="headers" ID="ID_1574236254" CREATED="1551454439789" MODIFIED="1551454444877"/>
<node TEXT="content_type" ID="ID_1125878698" CREATED="1551454445087" MODIFIED="1551454450749"/>
</node>
</node>
</node>
<node TEXT="&#x8fc7;&#x6ee4;&#x4e0e;&#x641c;&#x7d22;" POSITION="right" ID="ID_321215839" CREATED="1551455858990" MODIFIED="1551455868416">
<edge COLOR="#7c7c00"/>
<node TEXT="&#x8fc7;&#x6ee4;" ID="ID_1745977984" CREATED="1551458796852" MODIFIED="1551458798774">
<node TEXT="&#x9ed8;&#x8ba4;&#x8fc7;&#x6ee4;&#x662f;&#x5b8c;&#x5168;&#x5339;&#x914d;" ID="ID_1465188968" CREATED="1551457721995" MODIFIED="1551458759746">
<node TEXT="views.py &#x4e0b;&#x7684;filter_fields" ID="ID_1872720010" CREATED="1551458764540" MODIFIED="1551458791299"/>
</node>
<node TEXT="django-filter&#x81ea;&#x5b9a;&#x4e49;&#x8fc7;&#x6ee4;" ID="ID_1384756719" CREATED="1551457756657" MODIFIED="1551458750256">
<node TEXT="settins.py&#x4e2d;&#x52a0;&#x5165;django-filters app" ID="ID_1689504107" CREATED="1551457948141" MODIFIED="1551457966204"/>
<node TEXT="app&#x4e0b;&#x65b0;&#x5efa;filters.py" ID="ID_1076855680" CREATED="1551457785195" MODIFIED="1551457797512">
<node ID="ID_881351971" CREATED="1551457813943" MODIFIED="1551457813943"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">import </font></span>django_filters<br/><span style="color: #cc7832"><font color="#cc7832">from </font></span>.models <span style="color: #cc7832"><font color="#cc7832">import </font></span>Goods<br/><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsFiter(django_filters.rest_framework.FilterSet):<br/>    <span style="color: #629755; font-style: italic"><font color="#629755"><i>&quot;&quot;&quot;<br/></i></font></span><font color="#629755"><i><span style="color: #629755; font-style: italic">    &#21830;&#21697;&#30340;&#36807;&#28388;&#31867;<br/></span><span style="color: #629755; font-style: italic">    &quot;&quot;&quot;<br/></span><span style="color: #629755; font-style: italic">    </span></i></font>price_min = django_filters.NumberFilter(<span style="color: #aa4926"><font color="#aa4926">name</font></span>=<span style="color: #6a8759"><font color="#6a8759">'shop_price'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">lookup_expr</font></span>=<span style="color: #6a8759"><font color="#6a8759">'gte'</font></span>)<br/>    price_max = django_filters.NumberFilter(<span style="color: #aa4926"><font color="#aa4926">name</font></span>=<span style="color: #6a8759"><font color="#6a8759">'shop_price'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">lookup_expr</font></span>=<span style="color: #6a8759"><font color="#6a8759">'lte'</font></span>)<br/><br/>    <span style="color: #cc7832"><font color="#cc7832">class </font></span>Meta:<br/>        model = Goods<br/>        fields = [<span style="color: #6a8759"><font color="#6a8759">'price_min'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'price_max'</font></span>]</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="views.py&#x4e0b;&#x7684;&#x53d8;&#x91cf;" ID="ID_1471155489" CREATED="1551457875009" MODIFIED="1551457889923">
<node ID="ID_593344918" CREATED="1551457890703" MODIFIED="1551457890703"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsListViewSet(viewsets.GenericViewSet<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">                       </span></font>mixins.ListModelMixin<span style="color: #cc7832"><font color="#cc7832">,</font></span>):<br/><br/>    queryset = Goods.objects.all()<br/>    serializer_class = GoodsSerializer<br/>    <span style="color: #808080"><font color="#808080"># &#35774;&#32622;filter<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font><span style="color: #cc7832"><font color="#cc7832">from </font></span>django_filters.rest_framework <span style="color: #cc7832"><font color="#cc7832">import </font></span>DjangoFilterBackend<br/>    <span style="color: #cc7832"><font color="#cc7832">from </font></span>.filters <span style="color: #cc7832"><font color="#cc7832">import </font></span>GoodsFiter<br/>    filter_backends = (DjangoFilterBackend<span style="color: #cc7832"><font color="#cc7832">,</font></span>)<br/>    filter_class = GoodsFiter</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="&#x5b9a;&#x4e49;django_filters&#x4e0b;&#x7684;&#x65b9;&#x6cd5;&#x8fdb;&#x884c;&#x8fc7;&#x6ee4;" ID="ID_236676452" CREATED="1551458039315" MODIFIED="1551458092306">
<node ID="ID_772165447" CREATED="1551624109110" MODIFIED="1551624109110"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt">top_category = django_filters.NumberFilter(<span style="color: #aa4926"><font color="#aa4926">method</font></span>=<span style="color: #6a8759"><font color="#6a8759">'top_category_filter'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1674508494" CREATED="1551624118674" MODIFIED="1551624118674"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">top_category_filter</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>queryset<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #808080"><font color="#808080">name</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>value):<br/>    q = Q(<span style="color: #aa4926"><font color="#aa4926">category__id</font></span>=value) \<br/>        | Q(<span style="color: #aa4926"><font color="#aa4926">category__parent_category__id</font></span>=value) \<br/>        | Q(<span style="color: #aa4926"><font color="#aa4926">category__parent_category__parent_category__id</font></span>=value)<br/>    <span style="color: #cc7832"><font color="#cc7832">return </font></span>queryset.filter(q)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="&#x641c;&#x7d22;" ID="ID_1759919083" CREATED="1551458828556" MODIFIED="1551458846860">
<node TEXT="&#x7528;&#x7684;&#x662f;DRF&#x7684;filter&#xff0c;&#x6ce8;&#x610f;&#x548c;django-filter&#x533a;&#x5206;" ID="ID_1310435118" CREATED="1551458847199" MODIFIED="1551458883536"/>
<node TEXT="&#x9ed8;&#x8ba4;&#x7528;get&#x65b9;&#x6cd5;&#x3001;search&#x5b57;&#x6bb5;" ID="ID_1373562337" CREATED="1551458979881" MODIFIED="1551459013757"/>
<node ID="ID_469207968" CREATED="1551458944142" MODIFIED="1551458944142"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">from </font></span>rest_framework <span style="color: #cc7832"><font color="#cc7832">import </font></span>filters</pre>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_724108695" CREATED="1551458902208" MODIFIED="1551458902208"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsListViewSet(viewsets.GenericViewSet<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">                       </span></font>mixins.ListModelMixin<span style="color: #cc7832"><font color="#cc7832">,</font></span>):<br/><br/>    queryset = Goods.objects.all()<br/>    serializer_class = GoodsSerializer<br/>    <span style="color: #808080"><font color="#808080"># &#35774;&#32622;filter&#65292;django-filter&#36807;&#28388;&#65292;DRF&#30340;filter&#25628;&#32034;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>filter_backends = (DjangoFilterBackend<span style="color: #cc7832"><font color="#cc7832">, </font></span>filters.SearchFilter)<br/>    filter_class = GoodsFiter<br/>    <span style="color: #808080"><font color="#808080"># &#19968;&#20010;&#23383;&#27573;&#25628;&#19979;&#38754;&#30340;&#25152;&#26377;&#21442;&#25968;&#65292;&#27880;&#24847;&#21644;filter&#21306;&#21035;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>search_fields = (<span style="color: #6a8759"><font color="#6a8759">'name'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'goods_brief'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'goods_desc'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
<node TEXT="&#x652f;&#x6301;&#x6b63;&#x5219;&#x8868;&#x8fbe;&#x5f0f;" ID="ID_62928617" CREATED="1551459046110" MODIFIED="1551459054089">
<node TEXT="^" ID="ID_341529749" CREATED="1551459073111" MODIFIED="1551459082448">
<node TEXT="&#x5f00;&#x5934;" ID="ID_197468738" CREATED="1551459082660" MODIFIED="1551459087012"/>
<node TEXT=" &apos;^name&apos;" ID="ID_621611108" CREATED="1551459087561" MODIFIED="1551459179564"/>
</node>
<node TEXT="=" ID="ID_1884543585" CREATED="1551459106553" MODIFIED="1551459171851" VGAP_QUANTITY="6.8999999999999995 pt">
<node TEXT="&#x7cbe;&#x786e;&#x8fc7;&#x6ee4;" ID="ID_334585837" CREATED="1551459109464" MODIFIED="1551459116146"/>
<node TEXT=" &apos;=name&apos;" ID="ID_975129987" CREATED="1551459165966" MODIFIED="1551459176078"/>
</node>
<node TEXT="@" ID="ID_434730865" CREATED="1551459117831" MODIFIED="1551459122394">
<node TEXT="&#x5168;&#x6587;&#x641c;&#x7d22;" ID="ID_1549028462" CREATED="1551459125509" MODIFIED="1551459138603"/>
<node TEXT="&#x9700;&#x8981;&#x6570;&#x636e;&#x8868;&#x652f;&#x6301;" ID="ID_527846560" CREATED="1551459252166" MODIFIED="1551459269808"/>
</node>
<node TEXT="$" ID="ID_1841848564" CREATED="1551459151570" MODIFIED="1551459160446">
<node TEXT="&#x6b63;&#x5219;&#x8868;&#x8fbe;&#x5f0f;" ID="ID_434475706" CREATED="1551459160732" MODIFIED="1551459164195"/>
</node>
</node>
</node>
</node>
<node TEXT="&#x6392;&#x5e8f;" POSITION="right" ID="ID_582971968" CREATED="1551459366093" MODIFIED="1551459370498">
<edge COLOR="#ff0000"/>
<node ID="ID_1978203941" CREATED="1551620321330" MODIFIED="1551620334865"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt">filter_backends = (DjangoFilterBackend<span style="color: #cc7832"><font color="#cc7832">, </font></span>filters.SearchFilter<span style="color: #cc7832"><font color="#cc7832">, </font></span>filters.OrderingFilter)<br/><span style="color: #808080"><font color="#808080"># &#25490;&#24207;&#35774;&#32622;, &#38656;&#35201;&#20837;&#21442;{'ordering': '-add_time'}<br/></font></span>ordering_fields = (<span style="color: #6a8759"><font color="#6a8759">'add_time'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'shop_price'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'sold_num'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x5d4c;&#x5957;&#x7684;&#x5546;&#x54c1;&#x7c7b;&#x522b;&#x5217;&#x8868;&#x4e0e;&#x8be6;&#x60c5;" POSITION="right" ID="ID_1613677269" CREATED="1551620375274" MODIFIED="1551620706656">
<edge COLOR="#0000ff"/>
<node TEXT="serializers.py" ID="ID_1263405012" CREATED="1551620415185" MODIFIED="1551620423327">
<node ID="ID_1489433180" CREATED="1551620508844" MODIFIED="1551620712077"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsCategorySerializer2(serializers.ModelSerializer):<br/>    <span style="color: #cc7832"><font color="#cc7832">class </font></span>Meta:<br/>        model = GoodsCategory<br/>        fields = <span style="color: #6a8759"><font color="#6a8759">'__all__'<br/></font></span><font color="#6a8759"><span style="color: #6a8759"><br/></span><span style="color: #6a8759"><br/></span></font><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsCategorySerializer(serializers.ModelSerializer):<br/>    <span style="color: #808080"><font color="#808080"># sub_cat &#26159;relate_name &#19968;&#23545;&#22810; &#21453;&#26597;<br/></font></span><font color="#808080"><span style="color: #808080">    # &#21830;&#21697;&#31867;&#21035;&#26159;&#23884;&#22871;&#30340;&#20851;&#31995;<br/></span><span style="color: #808080">    </span></font>sub_cat = GoodsCategorySerializer2(<span style="color: #aa4926"><font color="#aa4926">many</font></span>=<span style="color: #cc7832"><font color="#cc7832">True</font></span>)<br/><br/>    <span style="color: #cc7832"><font color="#cc7832">class </font></span>Meta:<br/>        model = GoodsCategory<br/>        fields = <span style="color: #6a8759"><font color="#6a8759">'__all__'<br/></font></span></pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="views.py" ID="ID_567538158" CREATED="1551620510878" MODIFIED="1551620517468">
<node ID="ID_844789823" CREATED="1551620713688" MODIFIED="1551620713688"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>GoodsCategoryViewSet(viewsets.GenericViewSet<span style="color: #cc7832"><font color="#cc7832">, </font></span>mixins.ListModelMixin<span style="color: #cc7832"><font color="#cc7832">, </font></span>mixins.RetrieveModelMixin):<br/>    <span style="color: #629755; font-style: italic"><font color="#629755"><i>&quot;&quot;&quot;<br/></i></font></span><font color="#629755"><i><span style="color: #629755; font-style: italic">    list:<br/></span><span style="color: #629755; font-style: italic">        &#21830;&#21697;&#20998;&#31867;&#21015;&#34920;&#25968;&#25454;<br/></span><span style="color: #629755; font-style: italic">    dict:<br/></span><span style="color: #629755; font-style: italic">        /id<br/></span><span style="color: #629755; font-style: italic">        &#21830;&#21697;&#20998;&#31867;&#35814;&#24773;<br/></span><span style="color: #629755; font-style: italic">    &quot;&quot;&quot;<br/></span><span style="color: #629755; font-style: italic">    </span></i></font><span style="color: #808080"><font color="#808080"># &#33719;&#21462;&#31532;&#19968;&#31867;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>queryset = GoodsCategory.objects.filter(<span style="color: #aa4926"><font color="#aa4926">category_type</font></span>=<span style="color: #6897bb"><font color="#6897bb">1</font></span>)<br/>    serializer_class = GoodsCategorySerializer<br/></pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="urls.py" ID="ID_508642959" CREATED="1551620732237" MODIFIED="1551620738883">
<node ID="ID_593090764" CREATED="1551620761847" MODIFIED="1551620761847"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># &#21830;&#21697;&#31867;&#21035;&#21015;&#34920;<br/></font></span>router.register(<span style="color: #6a8759"><font color="#6a8759">r'categorys'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>GoodsCategoryViewSet<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">base_name</font></span>=<span style="color: #6a8759"><font color="#6a8759">'categorys'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="django&#x5141;&#x8bb8;&#x8de8;&#x57df;&#x8bbe;&#x7f6e;" POSITION="right" ID="ID_1887841620" CREATED="1551620787026" MODIFIED="1551620807197">
<edge COLOR="#00ff00"/>
<node TEXT=" pip instatll django-cors-headers" ID="ID_1303592769" CREATED="1551620851902" MODIFIED="1551620862064"/>
<node TEXT="settings.py" ID="ID_755355035" CREATED="1551620869551" MODIFIED="1551620883527">
<node TEXT="&#x6ce8;&#x518c;app" ID="ID_1504869591" CREATED="1551620883955" MODIFIED="1551620896045">
<node TEXT=" &apos;corsheaders&apos;" ID="ID_402217773" CREATED="1551620901843" MODIFIED="1551620905498"/>
</node>
<node TEXT="&#x52a0;&#x5165;&#x4e2d;&#x95f4;&#x4ef6;" ID="ID_1602195184" CREATED="1551620916037" MODIFIED="1551620963073">
<node ID="ID_1069579653" CREATED="1551620963888" MODIFIED="1551620982688"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt">MIDDLEWARE = [<span style="color: #cc7832"><font color="#cc7832"><br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font><span style="color: #808080"><font color="#808080"># &#35201;&#22312;CsrfViewMiddleware &#20043;&#21069;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font><span style="color: #6a8759"><font color="#6a8759">'corsheaders.middleware.CorsMiddleware'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font><span style="color: #6a8759"><font color="#6a8759">'django.middleware.csrf.CsrfViewMiddleware'</font></span><span style="color: #cc7832"><font color="#cc7832">,</font></span><font color="#cc7832"><span style="color: #cc7832"><br/></span></font>]</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x8bbe;&#x7f6e;&#x53d8;&#x91cf;" ID="ID_1009711809" CREATED="1551620993145" MODIFIED="1551621004834">
<node ID="ID_1048251978" CREATED="1551621015733" MODIFIED="1551621015733"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># &#20801;&#35768;&#36328;&#22495;<br/></font></span>CORS_ORIGIN_ALLOW_ALL = <span style="color: #cc7832"><font color="#cc7832">True</font></span></pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="&#x8ba4;&#x8bc1;" POSITION="right" ID="ID_462535818" CREATED="1551701730965" MODIFIED="1551701937674">
<edge COLOR="#00ffff"/>
<node TEXT="DRF session" ID="ID_269613233" CREATED="1551701774096" MODIFIED="1551710501168"/>
<node TEXT="DRF token" ID="ID_1721634388" CREATED="1551702090708" MODIFIED="1551710498472">
<node TEXT="settings.py" ID="ID_413202627" CREATED="1551702146100" MODIFIED="1551702151673">
<node TEXT="&#x52a0;&#x5165;app" ID="ID_1659156083" CREATED="1551702157168" MODIFIED="1551702164106">
<node ID="ID_780268891" CREATED="1551702179503" MODIFIED="1551702179503"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #6a8759"><font color="#6a8759">'rest_framework.authtoken'</font></span><span style="color: #cc7832"><font color="#cc7832">,</font></span></pre>
  </body>
</html>
</richcontent>
</node>
<node TEXT="&#x8be5;&#x64cd;&#x4f5c;&#x4e4b;&#x540e;&#x9700;&#x8981;&#x5efa;&#x7acb;&#x4e00;&#x5f20;&#x8868;" ID="ID_1855634832" CREATED="1551702194085" MODIFIED="1551702272336"/>
</node>
<node TEXT="REST_FRAMEWORK" ID="ID_937962446" CREATED="1551708165160" MODIFIED="1551708178539">
<node TEXT="token&#x8bbe;&#x7f6e;" ID="ID_251335775" CREATED="1551708179217" MODIFIED="1551708199408">
<node ID="ID_1228057914" CREATED="1551708207558" MODIFIED="1551855007751"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># &#29992;&#25143;&#35748;&#35777;<br/></font></span><span style="color: #6a8759"><font color="#6a8759">'DEFAULT_AUTHENTICATION_CLASSES'</font></span>: (<br/>    <span style="color: #6a8759"><font color="#6a8759">'rest_framework.authentication.BasicAuthentication'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font><span style="color: #6a8759"><font color="#6a8759">'rest_framework.authentication.SessionAuthentication'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font><span style="color: #6a8759"><font color="#6a8759">'rest_framework.authentication.TokenAuthentication'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span>)<span style="color: #cc7832"><font color="#cc7832">,</font></span></pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x5bf9;&#x6240;&#x6709;&#x63a5;&#x53e3;&#x8fdb;&#x884c;&#x9a8c;&#x8bc1;" ID="ID_1606939645" CREATED="1551708208826" MODIFIED="1551708218940">
<node ID="ID_1722161687" CREATED="1551708226418" MODIFIED="1551708226418"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># &#35774;&#32622;&#25152;&#26377;&#25509;&#21475;&#37117;&#35201;&#39564;&#35777;<br/></font></span><span style="color: #6a8759"><font color="#6a8759">'DEFAULT_PERMISSION_CLASSES'</font></span>: (<br/>        <span style="color: #6a8759"><font color="#6a8759">'rest_framework.permissions.IsAuthenticated'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font>)<span style="color: #cc7832"><font color="#cc7832">,</font></span></pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="console" ID="ID_1588322270" CREATED="1551702275868" MODIFIED="1551702287093">
<node TEXT="python manage.py migrate" ID="ID_544286459" CREATED="1551702287363" MODIFIED="1551702300373"/>
<node TEXT="&#x65b0;&#x751f;&#x6210;&#x8868;&#x540d;&#xff1a;authtoken_token" ID="ID_426155464" CREATED="1551702369123" MODIFIED="1551702416586"/>
</node>
<node TEXT="urls.py" ID="ID_1387070568" CREATED="1551702419874" MODIFIED="1551702879211">
<node ID="ID_1605567986" CREATED="1551702887384" MODIFIED="1551702887384"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">from </font></span>rest_framework.authtoken <span style="color: #cc7832"><font color="#cc7832">import </font></span>views</pre>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1186062374" CREATED="1551702900631" MODIFIED="1551702900631"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># &#33719;&#21462;token<br/></font></span>url(<span style="color: #6a8759"><font color="#6a8759">r'api-token-auth/'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>views.obtain_auth_token)<span style="color: #cc7832"><font color="#cc7832">,</font></span></pre>
  </body>
</html>
</richcontent>
</node>
<node TEXT="&#x6b63;&#x5e38;post&#x7528;&#x6237;&#x4fe1;&#x606f;&#xff0c;&#x8fd4;&#x56de;token&#x5e76;&#x5b58;&#x5165;&#x6570;&#x636e;&#x8868;" ID="ID_859533490" CREATED="1551702913059" MODIFIED="1551703697695"/>
</node>
<node TEXT="&#x4f7f;&#x7528;" ID="ID_600716080" CREATED="1551703544796" MODIFIED="1551703549015">
<node TEXT="post JSON&#x7528;&#x6237;&#x4fe1;&#x606f;" ID="ID_492180157" CREATED="1551703619387" MODIFIED="1551703639102">
<node TEXT="&apos;host/aip-token-auth/&apos;" ID="ID_761007943" CREATED="1551703645885" MODIFIED="1551703653923"/>
<node ID="ID_1179115078" CREATED="1551703654910" MODIFIED="1551703654910"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#21363;&#21487;&#36820;&#22238;token
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x52a0;&#x5165;http HEADER" ID="ID_342175637" CREATED="1551703701238" MODIFIED="1551703709720">
<node TEXT="key" ID="ID_653453648" CREATED="1551703717787" MODIFIED="1551703722249">
<node TEXT="Authorization" ID="ID_407302847" CREATED="1551703722580" MODIFIED="1551703728921"/>
</node>
<node TEXT="value" ID="ID_1406920703" CREATED="1551703730468" MODIFIED="1551703732343">
<node TEXT="Token b6c19615b290493d896f59f7bce6bbce956a411b" ID="ID_1396333729" CREATED="1551703796575" MODIFIED="1551703813196" MAX_WIDTH="11.2 cm"/>
</node>
</node>
<node TEXT="&#x6b63;&#x786e;&#x7684;token" ID="ID_1451911411" CREATED="1551712788980" MODIFIED="1551712795292">
<node TEXT="request.user &#x8bfb;&#x51fa;&#x5f53;&#x524d;&#x7528;&#x6237;" ID="ID_1113258631" CREATED="1551712773130" MODIFIED="1551712807925"/>
<node TEXT="&#x7528;request.auth &#x8bfb;&#x51fa;token" ID="ID_1178148508" CREATED="1551704565154" MODIFIED="1551712787111"/>
</node>
</node>
<node TEXT="&#x6ce8;&#x610f;" ID="ID_981071843" CREATED="1551710509149" MODIFIED="1551710514288">
<node TEXT="&#x6ca1;&#x6709;token&#x8fc7;&#x671f;" ID="ID_240268706" CREATED="1551710514497" MODIFIED="1551710520855"/>
</node>
</node>
<node TEXT="DRF JWT" ID="ID_1710533685" CREATED="1551710356895" MODIFIED="1551947587332">
<node TEXT="json web token" ID="ID_705701199" CREATED="1551710380731" MODIFIED="1551710389488"/>
<node TEXT="&#x5305;&#x542b;&#x6240;&#x9700;&#x7684;&#x7528;&#x6237;&#x4fe1;&#x606f;&#xff0c;&#x907f;&#x514d;&#x591a;&#x6b21;&#x67e5;&#x8be2;&#x6570;&#x636e;&#x5e93;" ID="ID_1203187251" CREATED="1551710391230" MODIFIED="1551710782352"/>
<node TEXT="&#x914d;&#x7f6e;" ID="ID_1639242524" CREATED="1551712469103" MODIFIED="1551712603900">
<node TEXT="pip install djangorestframework-jwt" ID="ID_234101249" CREATED="1551712473550" MODIFIED="1551712500411"/>
<node TEXT="settings.py" ID="ID_959672956" CREATED="1551712502478" MODIFIED="1551712512442">
<node TEXT="REST_FRAMEWORK" ID="ID_334052870" CREATED="1551712512685" MODIFIED="1551712524488">
<node ID="ID_115701522" CREATED="1551712543339" MODIFIED="1551712543339"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #6a8759"><font color="#6a8759">'DEFAULT_AUTHENTICATION_CLASSES'</font></span>: (<br/>    <span style="color: #6a8759"><font color="#6a8759">'rest_framework.authentication.BasicAuthentication'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font><span style="color: #6a8759"><font color="#6a8759">'rest_framework.authentication.SessionAuthentication'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font><span style="color: #6a8759"><font color="#6a8759">'rest_framework_jwt.authentication.JSONWebTokenAuthentication'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span>)<span style="color: #cc7832"><font color="#cc7832">,</font></span></pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="urls.py" ID="ID_619692717" CREATED="1551712547825" MODIFIED="1551712551067">
<node ID="ID_1882322946" CREATED="1551712583421" MODIFIED="1551712583421"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">from </font></span>rest_framework_jwt.views <span style="color: #cc7832"><font color="#cc7832">import </font></span>obtain_jwt_token</pre>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1703593023" CREATED="1551712568405" MODIFIED="1551712568405"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># jwt&#30340;token&#35748;&#35777;&#27169;&#24335;<br/></font></span>url(<span style="color: #6a8759"><font color="#6a8759">r'^api-jwt-auth/'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>obtain_jwt_token)<span style="color: #cc7832"><font color="#cc7832">,</font></span></pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="&#x4f7f;&#x7528;" ID="ID_1470573139" CREATED="1551703544796" MODIFIED="1551703549015">
<node TEXT="post JSON&#x7528;&#x6237;&#x4fe1;&#x606f;" ID="ID_1903765551" CREATED="1551703619387" MODIFIED="1551703639102">
<node TEXT="&apos;host/aip-token-auth/&apos;" ID="ID_1495209031" CREATED="1551703645885" MODIFIED="1551703653923"/>
<node ID="ID_603580791" CREATED="1551703654910" MODIFIED="1551703654910"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#21363;&#21487;&#36820;&#22238;token
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x52a0;&#x5165;http HEADER" ID="ID_959633614" CREATED="1551703701238" MODIFIED="1551703709720">
<node TEXT="key" ID="ID_40378526" CREATED="1551703717787" MODIFIED="1551703722249">
<node TEXT="Authorization" ID="ID_1563438643" CREATED="1551703722580" MODIFIED="1551703728921"/>
</node>
<node TEXT="value" ID="ID_1820440401" CREATED="1551703730468" MODIFIED="1551703732343">
<node TEXT="JWT eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9&#xa;.eyJ1c2VyX2lkIjoxLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNTUxNzEyNzMzLCJlbWFpbCI6InlAeS5jb20ifQ&#xa;._rp_-MlHgx_4YC638IOwnMTNnY3lX9KAq5Zlw4y9SQ8" ID="ID_1099777315" CREATED="1551703796575" MODIFIED="1551712735135"/>
</node>
</node>
<node TEXT="&#x6b63;&#x786e;&#x7684;token" ID="ID_245109986" CREATED="1551712788980" MODIFIED="1551712795292">
<node TEXT="request.user &#x8bfb;&#x51fa;&#x5f53;&#x524d;&#x7528;&#x6237;" ID="ID_1538310503" CREATED="1551712773130" MODIFIED="1551712807925"/>
<node TEXT="&#x7528;request.auth &#x8bfb;&#x51fa;jwt" ID="ID_1364091574" CREATED="1551704565154" MODIFIED="1551712868837"/>
</node>
</node>
</node>
<node TEXT="jwt" ID="ID_152723338" CREATED="1551944030257" MODIFIED="1551949676252">
<node TEXT="&#x8ba4;&#x8bc1;&#x65b9;&#x6cd5;" ID="ID_1852517037" CREATED="1551944214323" MODIFIED="1551944221729">
<node TEXT="Cookie" ID="ID_31592493" CREATED="1551944222450" MODIFIED="1551944263005"/>
<node TEXT="Session" ID="ID_1810003841" CREATED="1551944227164" MODIFIED="1551944260535">
<node TEXT="&#x6982;&#x5ff5;" ID="ID_755611611" CREATED="1551944904953" MODIFIED="1551944914847">
<node TEXT="&#x57fa;&#x4e8e;cookie&#x5b9e;&#x73b0;" ID="ID_1417683842" CREATED="1551944231299" MODIFIED="1551944238461"/>
<node TEXT=" &#x670d;&#x52a1;&#x5668;&#x4fdd;&#x5b58;&#x76f8;&#x5173;&#x6570;&#x636e;&#xff0c;&#x6bd4;&#x5982;&#x7528;&#x6237;&#x89d2;&#x8272;&#x3001;&#x767b;&#x5f55;&#x65f6;&#x95f4;" ID="ID_758125757" CREATED="1551944410339" MODIFIED="1551944474485"/>
<node TEXT="&#x8fd4;&#x56de;&#x4e00;&#x4e2a;session_id&#x5199;&#x5165;Cookie" ID="ID_1965409047" CREATED="1551944474851" MODIFIED="1551944848575"/>
<node TEXT="&#x901a;&#x8fc7;session_id&#x83b7;&#x53d6;&#x7528;&#x6237;&#x4fe1;&#x606f;" ID="ID_1687983198" CREATED="1551944858314" MODIFIED="1551944870431"/>
</node>
<node TEXT="&#x7f3a;&#x70b9;" ID="ID_39427372" CREATED="1551944921386" MODIFIED="1551944926741">
<node TEXT="&#x6269;&#x5c55;&#x6027;&#xff08;scaling&#xff09;&#x4e0d;&#x597d;" ID="ID_933574346" CREATED="1551944926995" MODIFIED="1551944936053"/>
<node TEXT=" &#x670d;&#x52a1;&#x5668;&#x96c6;&#x7fa4;&#xff0c;&#x6216;&#x8005;&#x662f;&#x8de8;&#x57df;&#x7684;&#x670d;&#x52a1;&#x5bfc;&#x5411;&#x67b6;&#x6784;&#xff0c;&#x5c31;&#x8981;&#x6c42; session &#x6570;&#x636e;&#x5171;&#x4eab;" ID="ID_1996260021" CREATED="1551944952235" MODIFIED="1551944954687"/>
</node>
<node TEXT="&#x89e3;&#x51b3;&#x65b9;&#x6848;" ID="ID_76775485" CREATED="1551944983642" MODIFIED="1551944989648">
<node TEXT="session&#x6301;&#x4e45;&#x5316;" ID="ID_1001422252" CREATED="1551944989891" MODIFIED="1551945000687">
<node TEXT=" &#x5199;&#x5165;&#x6570;&#x636e;&#x5e93;&#x6216;&#x522b;&#x7684;&#x6301;&#x4e45;&#x5c42;" ID="ID_1932528755" CREATED="1551945026067" MODIFIED="1551945027269"/>
<node TEXT="&#x5de5;&#x7a0b;&#x91cf;&#x6bd4;&#x8f83;&#x5927;" ID="ID_1023924067" CREATED="1551945035817" MODIFIED="1551945038715"/>
</node>
<node TEXT="&#x6240;&#x6709;&#x6570;&#x636e;&#x4fdd;&#x5b58;&#x5728;&#x5ba2;&#x6237;&#x7aef;" ID="ID_1821410190" CREATED="1551945000921" MODIFIED="1551945069982">
<node ID="ID_715181701" CREATED="1551945070900" MODIFIED="1551945070900"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#27425;&#35831;&#27714;&#37117;&#21457;&#22238;&#26381;&#21153;&#22120;
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="&#x5982;JWT" ID="ID_1126256700" CREATED="1551945073546" MODIFIED="1551945076998"/>
</node>
</node>
</node>
<node TEXT="Token" ID="ID_1124095025" CREATED="1551944240131" MODIFIED="1551944257015">
<node TEXT="&#x6982;&#x5ff5;" ID="ID_1188082843" CREATED="1551945196294" MODIFIED="1551945204341">
<node TEXT="&#x4ec5;&#x4ec5;&#x9700;&#x8981;&#x5728; HTTP &#x7684;&#x5934;&#x90e8;&#x9644;&#x4e0a; token&#xff0c;&#xa;&#x7531;&#x670d;&#x52a1;&#x5668; check signature &#x5373;&#x53ef;&#x5b9e;&#x73b0;" ID="ID_847479184" CREATED="1551944291313" MODIFIED="1551944321646"/>
<node TEXT=" &#x65e0;&#x987b;&#x62c5;&#x5fc3; cookie &#x5b58;&#x5728;&#x7684; CORS &#x95ee;&#x9898;" ID="ID_236634250" CREATED="1551944326834" MODIFIED="1551944328253"/>
<node TEXT="&#x5982; JSON Web Token" ID="ID_1378721954" CREATED="1551944267468" MODIFIED="1551944296385"/>
</node>
</node>
</node>
<node TEXT=" JSON Web Token" ID="ID_1964173679" CREATED="1551945299636" MODIFIED="1551945301508">
<node TEXT="" ID="ID_1828534918" CREATED="1551945342675" MODIFIED="1551945342675">
<node TEXT="&#x6570;&#x636e;&#x5728;&#x5ba2;&#x6237;&#x7aef;&#xff0c;&#x52a0;&#x4e0a;&#x7b7e;&#x540d;&#x4f5c;&#x9a8c;&#x8bc1;" ID="ID_1198681235" CREATED="1551945225393" MODIFIED="1551945276472">
<node TEXT="&#x5ba2;&#x6237;&#x7aef;&#x53ef;&#x4ee5;&#x5b58;&#x50a8;&#x5728;Cookie&#x91cc;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x5b58;&#x50a8;&#x5728;localStorage" ID="ID_808917221" CREATED="1551946178068" MODIFIED="1551946221792"/>
<node TEXT=" &#x5305;&#x542b;&#x6240;&#x9700;&#x7684;&#x7528;&#x6237;&#x4fe1;&#x606f;&#xff0c;&#x907f;&#x514d;&#x591a;&#x6b21;&#x67e5;&#x8be2;&#x6570;&#x636e;&#x5e93;" ID="ID_988235312" CREATED="1551945372458" MODIFIED="1551945374261"/>
<node TEXT=" &#x670d;&#x52a1;&#x5668;&#x53d8;&#x6210;&#x65e0;&#x72b6;&#x6001;&#x4e86;&#xff0c;&#x4ece;&#x800c;&#x6bd4;&#x8f83;&#x5bb9;&#x6613;&#x5b9e;&#x73b0;&#x6269;&#x5c55;" ID="ID_1910383994" CREATED="1551945286370" MODIFIED="1551945288157"/>
</node>
</node>
<node TEXT="&#x7ec4;&#x6210;" ID="ID_1464418120" CREATED="1551710799731" MODIFIED="1551710803588">
<node TEXT="" ID="ID_296869270" CREATED="1551945453684" MODIFIED="1551945458630">
<hook URI="django_restvue_files/png_7371395909677752245.png" SIZE="0.75" NAME="ExternalObject"/>
</node>
<node TEXT="Header" ID="ID_1995125816" CREATED="1551710803833" MODIFIED="1551710808114">
<node TEXT="BASE64URL&#x89e3;&#x7801;&#x4e00;&#x822c;&#x4e3a;" ID="ID_1199438" CREATED="1551945617275" MODIFIED="1551946128570">
<node TEXT="{&#xa;    &apos;alg&apos;: &apos;HS256&apos;,&#xa;    &apos;typ&apos;: &apos;JWT&apos;&#xa;}" ID="ID_1084343878" CREATED="1551710828445" MODIFIED="1551945639891"/>
</node>
<node TEXT="token&#x7c7b;&#x578b; &#x4e0e; &#x52a0;&#x5bc6;&#x7b97;&#x6cd5;" ID="ID_695643710" CREATED="1551711001611" MODIFIED="1551711016228"/>
</node>
<node TEXT="Payload &#x8d1f;&#x8f7d;" ID="ID_1240382414" CREATED="1551710808332" MODIFIED="1551711192499">
<node TEXT="BASE64URL&#x89e3;&#x7801;&#x4e3a;&#x7528;&#x6237;&#x4fe1;&#x606f;" ID="ID_1344185056" CREATED="1551945723946" MODIFIED="1551946139708">
<node ID="ID_1496811328" CREATED="1551710981879" MODIFIED="1551949187157"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt">{<br/>  <span style="color: #6a8759"><font color="#6a8759">&quot;sub&quot;</font></span>: <span style="color: #6a8759"><font color="#6a8759">&quot;1234567890&quot;</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">  </span></font><span style="color: #6a8759"><font color="#6a8759">&quot;name&quot;</font></span>: <span style="color: #6a8759"><font color="#6a8759">&quot;John Doe&quot;</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">  </span></font><span style="color: #6a8759"><font color="#6a8759">&quot;admin&quot;</font></span>: true<br/>}</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x89c4;&#x8303;" ID="ID_1693598227" CREATED="1551711085808" MODIFIED="1551711096035">
<node ID="ID_440868661" CREATED="1551711259760" MODIFIED="1551711259760"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      iss (issuer)&#65306;&#31614;&#21457;&#20154;
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1929398565" CREATED="1551711259760" MODIFIED="1551711259760"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      exp (expiration time)&#65306;&#36807;&#26399;&#26102;&#38388;
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1170569658" CREATED="1551711259762" MODIFIED="1551711259762"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      sub (subject)&#65306;&#20027;&#39064;
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_61323313" CREATED="1551711259764" MODIFIED="1551711259764"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      aud (audience)&#65306;&#21463;&#20247;
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_1406589263" CREATED="1551711259766" MODIFIED="1551711259766"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      nbf (Not Before)&#65306;&#29983;&#25928;&#26102;&#38388;
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_371987773" CREATED="1551711259768" MODIFIED="1551711259768"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      iat (Issued At)&#65306;&#31614;&#21457;&#26102;&#38388;
    </p>
  </body>
</html>
</richcontent>
</node>
<node ID="ID_646284105" CREATED="1551711259770" MODIFIED="1551711259770"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      jti (JWT ID)&#65306;&#32534;&#21495;
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="Signature &#x7b7e;&#x540d;" ID="ID_467493508" CREATED="1551710812241" MODIFIED="1551711200911">
<node TEXT="HMACSHA256(&#xa;  base64UrlEncode(header) + &quot;.&quot; +&#xa;  base64UrlEncode(payload),&#xa;  secret)" ID="ID_1856542126" CREATED="1551710828445" MODIFIED="1551946036366"/>
<node TEXT=" &#x4f7f;&#x7528; Header &#x91cc;&#x9762;&#x6307;&#x5b9a;&#x7684;&#x7b7e;&#x540d;&#x7b97;&#x6cd5;&#x751f;&#x6210;Signature&#x7b7e;&#x540d;" ID="ID_1454440692" CREATED="1551946009032" MODIFIED="1551946068740"/>
<node TEXT="&#x7b97;&#x51fa;&#x7b7e;&#x540d;&#x4ee5;&#x540e;&#xff0c;&#x628a; Header&#x3001;Payload&#x3001;Signature &#x62fc;&#x5728;&#x4e00;&#x8d77;" ID="ID_335651413" CREATED="1551946070609" MODIFIED="1551946094647"/>
</node>
</node>
<node TEXT="&#x7279;&#x70b9;" ID="ID_673225514" CREATED="1551946371929" MODIFIED="1551946378977">
<node TEXT=" JWT &#x9ed8;&#x8ba4;&#x662f;&#x4e0d;&#x52a0;&#x5bc6;&#x7684;(BASE64URL&#x7f16;&#x7801;)&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x751f;&#x6210;TOKEN&#x540e;&#x52a0;&#x5bc6;" ID="ID_616970150" CREATED="1551945907913" MODIFIED="1551946449389" MAX_WIDTH="11.0 cm"/>
<node TEXT="JWT &#x4e0d;&#x4ec5;&#x53ef;&#x4ee5;&#x7528;&#x4e8e;&#x8ba4;&#x8bc1;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x7528;&#x4e8e;&#x4ea4;&#x6362;&#x4fe1;&#x606f;&#x3002;&#x6709;&#x6548;&#x4f7f;&#x7528; JWT&#xff0c;&#x53ef;&#x4ee5;&#x964d;&#x4f4e;&#x670d;&#x52a1;&#x5668;&#x67e5;&#x8be2;&#x6570;&#x636e;&#x5e93;&#x7684;&#x6b21;&#x6570;" ID="ID_960311047" CREATED="1551946391484" MODIFIED="1551946446059"/>
<node TEXT=" &#x4e00;&#x65e6; JWT &#x7b7e;&#x53d1;&#x4e86;&#xff0c;&#x5728;&#x5230;&#x671f;&#x4e4b;&#x524d;&#x5c31;&#x4f1a;&#x59cb;&#x7ec8;&#x6709;&#x6548;&#xff0c;&#x9664;&#x975e;&#x670d;&#x52a1;&#x5668;&#x90e8;&#x7f72;&#x989d;&#x5916;&#x7684;&#x903b;&#x8f91;" ID="ID_131316898" CREATED="1551946460197" MODIFIED="1551946461228"/>
<node TEXT=" &#x4e3a;&#x4e86;&#x51cf;&#x5c11;&#x76d7;&#x7528;&#xff0c;JWT &#x4e0d;&#x5e94;&#x8be5;&#x4f7f;&#x7528; HTTP &#x534f;&#x8bae;&#x660e;&#x7801;&#x4f20;&#x8f93;&#xff0c;&#x8981;&#x4f7f;&#x7528; HTTPS &#x534f;&#x8bae;&#x4f20;&#x8f93;" ID="ID_1599895849" CREATED="1551946478961" MODIFIED="1551946480845"/>
</node>
</node>
</node>
</node>
<node TEXT="&#x7528;&#x6237;&#x6ce8;&#x518c;&#x5bc6;&#x7801;&#x5199;&#x5165;&#x5bc6;&#x6587;" POSITION="right" ID="ID_416847262" CREATED="1551949683210" MODIFIED="1551971901105">
<edge COLOR="#00007c"/>
<node TEXT=" &#x91cd;&#x8f7d;serializers.ModelSerializer&#x4e2d;&#x7684;create&#x65b9;&#x6cd5;" ID="ID_305808111" CREATED="1551972164290" MODIFIED="1551972166714">
<node TEXT="&#x7528;.set_password()&#x52a0;&#x5bc6;&#x660e;&#x6587;&#x5bc6;&#x7801;" ID="ID_1622226258" CREATED="1551971901365" MODIFIED="1551972206916"/>
<node ID="ID_1824716569" CREATED="1551972138810" MODIFIED="1551972138810"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">create</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>validated_data):<br/>    <span style="color: #629755; font-style: italic"><font color="#629755"><i>&quot;&quot;&quot;<br/></i></font></span><font color="#629755"><i><span style="color: #629755; font-style: italic">    &#35753;&#23494;&#30721;&#21487;&#20197;&#23494;&#25991;&#20445;&#23384;<br/></span><span style="color: #629755; font-style: italic">    &quot;&quot;&quot;<br/></span><span style="color: #629755; font-style: italic">    </span></i></font>user = <span style="color: #8888c6"><font color="#8888c6">super</font></span>(UserRegisterSerializer<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #94558d"><font color="#94558d">self</font></span>).create(<span style="color: #aa4926"><font color="#aa4926">validated_data</font></span>=validated_data)<br/>    user.set_password(validated_data[<span style="color: #6a8759"><font color="#6a8759">'password'</font></span>])<br/>    user.save()<br/>    <span style="color: #cc7832"><font color="#cc7832">return </font></span>user</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x4fe1;&#x53f7;&#x91cf;" ID="ID_851084220" CREATED="1551972141600" MODIFIED="1551972149338">
<node TEXT="&#x65b0;&#x5efa;signals.py&#x6587;&#x4ef6;" ID="ID_980911162" CREATED="1551972913788" MODIFIED="1551972936735">
<node ID="ID_16407372" CREATED="1551972956470" MODIFIED="1551972956470"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">from </font></span>django.db.models.signals <span style="color: #cc7832"><font color="#cc7832">import </font></span>post_save<br/><span style="color: #cc7832"><font color="#cc7832">from </font></span>django.dispatch <span style="color: #cc7832"><font color="#cc7832">import </font></span>receiver<br/><span style="color: #cc7832"><font color="#cc7832">from </font></span>django.contrib.auth <span style="color: #cc7832"><font color="#cc7832">import </font></span>get_user_model<br/><span style="color: #cc7832"><font color="#cc7832">from </font></span>rest_framework.authtoken.models <span style="color: #cc7832"><font color="#cc7832">import </font></span>Token<br/><br/>User = get_user_model()<br/><br/><br/><span style="color: #bbb529"><font color="#bbb529">@receiver</font></span>(post_save<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">sender</font></span>=User)<br/><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">create_auth_token</font></span>(<span style="color: #808080"><font color="#808080">sender</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>instance=<span style="color: #cc7832"><font color="#cc7832">None, </font></span>created=<span style="color: #cc7832"><font color="#cc7832">False, </font></span><span style="color: #808080"><font color="#808080">**kwargs</font></span>):<br/>    <span style="color: #cc7832"><font color="#cc7832">if </font></span>created:<br/>        password = instance.password<br/>        instance.set_password(password)<br/>        instance.save()<br/>        <span style="color: #808080"><font color="#808080"># &#29992;jwt&#23601;&#19981;&#29992;token&#20102;<br/></font></span><font color="#808080"><span style="color: #808080">        # Token.objects.create(user=instance)</span></font></pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="apps.py&#x4e0b;&#x914d;&#x7f6e;&#x4fe1;&#x53f7;&#x91cf;" ID="ID_922082617" CREATED="1551972959174" MODIFIED="1551972977885">
<node ID="ID_1216511289" CREATED="1551972986058" MODIFIED="1551972986058"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>UsersConfig(AppConfig):<br/>    name = <span style="color: #6a8759"><font color="#6a8759">'users'<br/></font></span><font color="#6a8759"><span style="color: #6a8759">    </span></font>verbose_name = <span style="color: #6a8759"><font color="#6a8759">&quot;&#29992;&#25143;&#31649;&#29702;&quot;<br/></font></span><font color="#6a8759"><span style="color: #6a8759"><br/></span><span style="color: #6a8759">    </span></font><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">ready</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span>):<br/>        <span style="color: #cc7832"><font color="#cc7832">import </font></span>users.signals</pre>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="&#x8054;&#x5408;&#x552f;&#x4e00;&#x7d22;&#x5f15;" POSITION="right" ID="ID_1490365595" CREATED="1552407355430" MODIFIED="1552407377013">
<edge COLOR="#007c00"/>
<node TEXT="&#x7528;&#x6237;&#x6536;&#x85cf;&#x4e0d;&#x80fd;&#x91cd;&#x8986;" ID="ID_1913910911" CREATED="1552407377331" MODIFIED="1552407408260"/>
<node TEXT="models.UserFav" ID="ID_101333982" CREATED="1552407920050" MODIFIED="1552407933595">
<node ID="ID_224310223" CREATED="1552407947680" MODIFIED="1552408578300"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>UserFav(models.Model):<br/>    user = models.ForeignKey(User<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">verbose_name</font></span>=<span style="color: #6a8759"><font color="#6a8759">'&#29992;&#25143;'</font></span>)<br/>    goods = models.ForeignKey(Goods<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">verbose_name</font></span>=<span style="color: #6a8759"><font color="#6a8759">'&#21830;&#21697;'</font></span>)<br/>    add_time = models.DateTimeField(<span style="color: #aa4926"><font color="#aa4926">default</font></span>=datetime.now<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">verbose_name</font></span>=<span style="color: #6a8759"><font color="#6a8759">'&#28155;&#21152;&#26102;&#38388;'</font></span>)<br/><br/>    <span style="color: #cc7832"><font color="#cc7832">class </font></span>Meta:<br/>        verbose_name = <span style="color: #6a8759"><font color="#6a8759">'&#29992;&#25143;&#25910;&#34255;'<br/></font></span><font color="#6a8759"><span style="color: #6a8759">        </span></font>verbose_name_plural = verbose_name<br/>        <span style="color: #808080"><font color="#808080"># &#32852;&#21512;&#21807;&#19968;&#32034;&#24341;&#65292;&#26144;&#23556;&#25968;&#25454;&#24211;&#65288;&#25968;&#25454;&#24211;&#23436;&#25104;&#65292;&#25968;&#25454;&#24211;&#25243;&#24322;&#24120;&#65289;<br/></font></span><font color="#808080"><span style="color: #808080">        </span></font>unique_together = (<span style="color: #6a8759"><font color="#6a8759">'user'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'goods'</font></span>)  <span style="color: #808080"><font color="#808080"># &#38656;&#35201;migration</font></span></pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x5c06; &#x5546;&#x54c1; &#x4e0e; &#x7528;&#x6237;ID &#x5efa;&#x7acb;unique &#x7d22;&#x5f15;" ID="ID_520272548" CREATED="1552407408698" MODIFIED="1552407447586">
<node TEXT="" ID="ID_1244105858" CREATED="1552408092255" MODIFIED="1552408096487">
<hook URI="django_restvue_files/png_8212709657555783566.png" SIZE="1.0" NAME="ExternalObject"/>
</node>
</node>
<node TEXT="serializers.py" ID="ID_902838665" CREATED="1552407454504" MODIFIED="1552407464519">
<node ID="ID_1809995366" CREATED="1552407473960" MODIFIED="1552407915955"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>UserFavSerializer(serializers.ModelSerializer):<br/>    <span style="color: #808080"><font color="#808080"># &#38544;&#34255;&#23383;&#27573;&#65292;&#40664;&#35748;&#29992;&#25143;&#36873;&#21462;&#24403;&#21069;&#29992;&#25143;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>user = serializers.HiddenField(<br/>        <span style="color: #aa4926"><font color="#aa4926">default</font></span>=serializers.CurrentUserDefault()<br/>    )<br/><br/>    <span style="color: #cc7832"><font color="#cc7832">class </font></span>Meta:<br/>        model = UserFav<br/>        fields = (<span style="color: #6a8759"><font color="#6a8759">'user'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'goods'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'id'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="views.py" ID="ID_162573037" CREATED="1552407475301" MODIFIED="1552407481205">
<node ID="ID_984969385" CREATED="1552407542497" MODIFIED="1552407542497"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>UserFavViewSet(<br/>        viewsets.GenericViewSet<span style="color: #cc7832"><font color="#cc7832">, </font></span>mixins.CreateModelMixin<span style="color: #cc7832"><font color="#cc7832">, <br/></font></span><font color="#cc7832"><span style="color: #cc7832">        </span></font>mixins.DestroyModelMixin<span style="color: #cc7832"><font color="#cc7832">, </font></span>mixins.ListModelMixin):<br/>    <span style="color: #629755; font-style: italic"><font color="#629755"><i>&quot;&quot;&quot;<br/></i></font></span><font color="#629755"><i><span style="color: #629755; font-style: italic">    &#29992;&#25143;&#25910;&#34255;<br/></span><span style="color: #629755; font-style: italic">    &quot;&quot;&quot;<br/></span><span style="color: #629755; font-style: italic">    </span></i></font>queryset = UserFav.objects.all()<br/>    serializer_class = UserFavSerializer</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="urls.py" ID="ID_277591640" CREATED="1552407549203" MODIFIED="1552407559378">
<node ID="ID_62442138" CREATED="1552407567257" MODIFIED="1552407567257"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #808080"><font color="#808080"># &#29992;&#25143;&#25910;&#34255;<br/></font></span>router.register(<span style="color: #6a8759"><font color="#6a8759">r'userfavs'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>UserFavViewSet<span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #aa4926"><font color="#aa4926">base_name</font></span>=<span style="color: #6a8759"><font color="#6a8759">'userfavs'</font></span>)</pre>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="&#x4e5f;&#x53ef;&#x4ee5;&#x5728;serializers&#x4e0b;&#x52a0;&#x5165;UniqueTogetherValidator&#x7684;validator&#x9a8c;&#x8bc1;" ID="ID_1486471087" CREATED="1552408475450" MODIFIED="1552408519029">
<node TEXT="&#x53ef;&#x540c;&#x65f6;unique_together&#x4f7f;&#x7528;&#x3002;&#x4fbf;&#x5e76;&#x4e0d;&#x6e05;&#x695a;&#x80fd;&#x5426;&#x5355;&#x72ec;&#x4f7f;&#x7528;" ID="ID_1125552601" CREATED="1552408526294" MODIFIED="1552408608801"/>
<node ID="ID_1309229709" CREATED="1552408810168" MODIFIED="1552408810168"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>UserFavSerializer(serializers.ModelSerializer):<br/>    <span style="color: #808080"><font color="#808080"># &#38544;&#34255;&#23383;&#27573;&#65292;&#40664;&#35748;&#29992;&#25143;&#36873;&#21462;&#24403;&#21069;&#29992;&#25143;<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>user = serializers.HiddenField(<br/>        <span style="color: #aa4926"><font color="#aa4926">default</font></span>=serializers.CurrentUserDefault()<br/>    )<br/><br/>    <span style="color: #cc7832"><font color="#cc7832">class </font></span>Meta:<br/>        model = UserFav<br/>        fields = (<span style="color: #6a8759"><font color="#6a8759">'user'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'goods'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'id'</font></span>)<br/>        validators = [<br/>            UniqueTogetherValidator(<br/>                <span style="color: #aa4926"><font color="#aa4926">queryset</font></span>=UserFav.objects.all()<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">                </span></font><span style="color: #aa4926"><font color="#aa4926">fields</font></span>=(<span style="color: #6a8759"><font color="#6a8759">'user'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #6a8759"><font color="#6a8759">'goods'</font></span>)<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">                </span></font><span style="color: #aa4926"><font color="#aa4926">message</font></span>=<span style="color: #6a8759"><font color="#6a8759">'&#24050;&#32463;&#25910;&#34255;'<br/></font></span><font color="#6a8759"><span style="color: #6a8759">            </span></font>)<br/>        ]</pre>
  </body>
</html>
</richcontent>
</node>
<node TEXT=" queryset" ID="ID_507843350" CREATED="1552461064562" MODIFIED="1552461082668">
<node TEXT=" &#x9700;&#x8981;&#x5f3a;&#x5236;&#x6267;&#x884c;&#x552f;&#x4e00;&#x6027;&#x7684;&#x67e5;&#x8be2;&#x96c6;" ID="ID_1903611622" CREATED="1552461083280" MODIFIED="1552461092422"/>
</node>
<node TEXT="fields" ID="ID_671687193" CREATED="1552408545265" MODIFIED="1552408704832">
<node TEXT="&#x8054;&#x5408;&#x552f;&#x4e00;&#x7d22;&#x5f15;&#x7684;&#x5b57;&#x6bb5;" ID="ID_1719531918" CREATED="1552461822538" MODIFIED="1552461837005"/>
</node>
<node TEXT=" message" ID="ID_771154688" CREATED="1552458148091" MODIFIED="1552458149348">
<node TEXT=" &#x9a8c;&#x8bc1;&#x5931;&#x8d25;&#x65f6;&#x5e94;&#x4f7f;&#x7528;&#x7684;&#x9519;&#x8bef;&#x6d88;&#x606f;" ID="ID_807261307" CREATED="1552458156560" MODIFIED="1552458158059"/>
</node>
</node>
</node>
<node TEXT="&#x7528;&#x6237;&#x8ba4;&#x8bc1;&#x4e0e;&#x6743;&#x9650;" POSITION="right" ID="ID_300493992" CREATED="1552571919436" MODIFIED="1552571935980">
<edge COLOR="#7c007c"/>
<node TEXT="&#x5168;&#x5c40;&#x8bbe;&#x7f6e;" ID="ID_1226089551" CREATED="1552571936194" MODIFIED="1552571947246">
<node ID="ID_1764188086" CREATED="1552571971525" MODIFIED="1552571990998"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt">REST_FRAMEWORK = {<font color="#808080"><span style="color: #808080"><br/></span><span style="color: #808080">    # &#29992;&#25143;&#35748;&#35777;<br/></span><span style="color: #808080">    </span></font><span style="color: #6a8759"><font color="#6a8759">'DEFAULT_AUTHENTICATION_CLASSES'</font></span>: (<br/>        <span style="color: #6a8759"><font color="#6a8759">'rest_framework.authentication.BasicAuthentication'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">        </span></font><span style="color: #6a8759"><font color="#6a8759">'rest_framework.authentication.SessionAuthentication'</font></span><span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">        </span></font><span style="color: #6a8759"><font color="#6a8759">'rest_framework.authentication.TokenAuthentication'</font></span><span style="color: #cc7832"><font color="#cc7832">,  </font></span><span style="color: #808080"><font color="#808080"># token<br/></font></span><font color="#808080"><span style="color: #808080">    </span></font>)<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span>}</pre>
  </body>
</html>

</richcontent>
</node>
</node>
<node TEXT="&#x5c40;&#x90e8;&#x8bbe;&#x7f6e;" ID="ID_418182399" CREATED="1552571948210" MODIFIED="1552571954334">
<node TEXT="view&#x7c7b;&#x4e2d;&#x52a0;&#x5165;&#x7c7b;&#x5c5e;&#x6027;" ID="ID_1356147696" CREATED="1552572009014" MODIFIED="1552572025550">
<node ID="ID_549366758" CREATED="1552572081005" MODIFIED="1552572081005"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt">permission_classes = (IsAuthenticated<span style="color: #cc7832"><font color="#cc7832">, </font></span>IsOwnerOrReadOnly)<br/>authentication_classes = (JSONWebTokenAuthentication<span style="color: #cc7832"><font color="#cc7832">, </font></span>SessionAuthentication)</pre>
  </body>
</html>

</richcontent>
</node>
</node>
<node TEXT="&#x4e00;&#x822c;&#x91c7;&#x7528;&#x5c40;&#x90e8;&#x8bbe;&#x7f6e;&#xff0c;&#x4e0d;&#x7136;token&#x8fc7;&#x671f;&#xff0c;&#x4f1a;&#x5bfc;&#x81f3;&#x6240;&#x6709;&#x63a5;&#x53e3;&#x65e0;&#x6cd5;&#x8bbf;&#x95ee;" ID="ID_1478444414" CREATED="1552572031188" MODIFIED="1552572119266"/>
</node>
</node>
<node TEXT="&#x6307;&#x5b9a;&#x8be6;&#x60c5;url&#x540e;&#x9762;&#x7684;&#x7d22;&#x5f15;" POSITION="right" ID="ID_1349725933" CREATED="1552572126573" MODIFIED="1552572289948">
<edge COLOR="#007c7c"/>
<node TEXT=" mixins.RetrieveModelMixin" ID="ID_1231145143" CREATED="1552572536453" MODIFIED="1552572541976"/>
<node TEXT="&#x4e00;&#x822c;&#x7528;id&#x5b57;&#x6bb5;" ID="ID_878807194" CREATED="1552572203939" MODIFIED="1552572211154">
<node TEXT="userfav/&lt;id&gt;" ID="ID_376196919" CREATED="1552572153515" MODIFIED="1552572200887"/>
</node>
<node TEXT="view&#x7c7b;&#x4e2d;&#x52a0;&#x5165;&#x7c7b;&#x5c5e;&#x6027;" ID="ID_834983298" CREATED="1552572212388" MODIFIED="1552572217611">
<node TEXT=" lookup_field = &apos;goods_id&apos;" ID="ID_881915964" CREATED="1552572221518" MODIFIED="1552572222801"/>
<node TEXT="userfav/&lt;goods_id&gt;" ID="ID_413450182" CREATED="1552572228109" MODIFIED="1552572254140"/>
</node>
</node>
<node TEXT="drf&#x6587;&#x6863;" POSITION="right" ID="ID_990801260" CREATED="1552575866516" MODIFIED="1552575888443">
<edge COLOR="#7c7c00"/>
<node TEXT="&#x63a5;&#x53e3;&#x8bf4;&#x660e;" ID="ID_1032155961" CREATED="1552575888762" MODIFIED="1552575905983">
<node ID="ID_655051801" CREATED="1552575920480" MODIFIED="1552575920480"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">class </font></span>UserFavViewSet(<br/>    viewsets.GenericViewSet<span style="color: #cc7832"><font color="#cc7832">, </font></span>mixins.CreateModelMixin<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font>mixins.DestroyModelMixin<span style="color: #cc7832"><font color="#cc7832">, </font></span>mixins.ListModelMixin<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font>mixins.RetrieveModelMixin<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span>):<br/>    <span style="color: #629755; font-style: italic"><font color="#629755"><i>&quot;&quot;&quot;<br/></i></font></span><font color="#629755"><i><span style="color: #629755; font-style: italic">    list:<br/></span><span style="color: #629755; font-style: italic">        &#29992;&#25143;&#25910;&#34255;&#21015;&#34920;<br/></span><span style="color: #629755; font-style: italic">    create:<br/></span><span style="color: #629755; font-style: italic">        &#26032;&#22686;&#25910;&#34255;<br/></span><span style="color: #629755; font-style: italic">    destroy:<br/></span><span style="color: #629755; font-style: italic">        &#21024;&#38500;&#25910;&#34255;<br/></span><span style="color: #629755; font-style: italic">    retrieve:<br/></span><span style="color: #629755; font-style: italic">        &#25910;&#34255;&#35814;&#24773;<br/></span><span style="color: #629755; font-style: italic">    &quot;&quot;&quot;</span></i></font></pre>
  </body>
</html>

</richcontent>
</node>
</node>
<node TEXT="&#x5b57;&#x6bb5;&#x8bf4;&#x660e;" ID="ID_140023990" CREATED="1552575922530" MODIFIED="1552575928226">
<node TEXT="model &#x5b57;&#x6bb5;&#x53c2;&#x6570;&#x4e2d;&#x8bbe;&#x7f6e; help_text" ID="ID_613308374" CREATED="1552575931305" MODIFIED="1552576001619"/>
<node TEXT="&#x6216;serializers &#x5b57;&#x6bb5;&#x53c2;&#x6570;&#x4e2d;&#x8bbe;&#x7f6e; help_text" ID="ID_1065328288" CREATED="1552576002542" MODIFIED="1552576063148"/>
<node TEXT=" &#x6216;filters &#x5b57;&#x6bb5;&#x53c2;&#x6570;&#x4e2d;&#x8bbe;&#x7f6e; help_text" ID="ID_877640240" CREATED="1552576232939" MODIFIED="1552576246878"/>
</node>
</node>
<node TEXT="&#x81ea;&#x5b9a;&#x8fd4;&#x56de;json&#x7684;&#x7ed3;&#x6784;" POSITION="right" ID="ID_227964268" CREATED="1552619943140" MODIFIED="1552619958274">
<edge COLOR="#ff0000"/>
<node ID="ID_229561954" CREATED="1552619964887" MODIFIED="1552619964887"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">get_paginated_response</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>data):<br/>    <span style="color: #cc7832"><font color="#cc7832">from </font></span>collections <span style="color: #cc7832"><font color="#cc7832">import </font></span>OrderedDict<br/>    <span style="color: #cc7832"><font color="#cc7832">from </font></span>rest_framework.response <span style="color: #cc7832"><font color="#cc7832">import </font></span>Response<br/>    <span style="color: #cc7832"><font color="#cc7832">return </font></span>Response(OrderedDict([<br/>        (<span style="color: #6a8759"><font color="#6a8759">'count'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span><span style="color: #94558d"><font color="#94558d">self</font></span>._paginator.page.paginator.count)<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">        </span></font><span style="color: #808080"><font color="#808080"># ('next', self._paginator.get_next_link()),<br/></font></span><font color="#808080"><span style="color: #808080">        # ('previous', self._paginator.get_previous_link()),<br/></span><span style="color: #808080">        </span></font>(<span style="color: #6a8759"><font color="#6a8759">'results'</font></span><span style="color: #cc7832"><font color="#cc7832">, </font></span>data)<br/>    ]))</pre>
  </body>
</html>

</richcontent>
</node>
<node TEXT="&#x91cd;&#x8f7d;get_paginate_response&#x65b9;&#x6cd5;" ID="ID_1039881565" CREATED="1552619968298" MODIFIED="1552619984536"/>
<node TEXT="self&#x540e;&#x9762;&#x52a0;&#x5165;_paginator&#x662f;&#x5173;&#x952e;&#xff0c;&#x8fd9;&#x4e2a;&#x662f;&#x5206;&#x9875;&#x7c7b;&#x7684;&#x5b9e;&#x4f8b;" ID="ID_1652206928" CREATED="1552619984828" MODIFIED="1552620034113"/>
</node>
<node TEXT="&#x52a8;&#x6001;&#x8bbe;&#x7f6e;permission &#x4e0e; serializer" POSITION="right" ID="ID_792043493" CREATED="1552632455768" MODIFIED="1552632473823">
<edge COLOR="#ff00ff"/>
<node TEXT="&#x6839;&#x636e;&#x4e0d;&#x540c;&#x7684;method&#x8bbe;&#x4e0d;&#x540c;&#x7684;&#x6743;&#x9650;" ID="ID_519451486" CREATED="1552631594698" MODIFIED="1552632479691">
<node TEXT="APIView&#x7c7b;&#x4e0b;&#x9762;&#x7684;get_permissions" ID="ID_1119543795" CREATED="1552631668091" MODIFIED="1552631802216"/>
<node TEXT="permissins" ID="ID_931184415" CREATED="1552632163840" MODIFIED="1552632168136">
<node TEXT="&#x83b7;&#x53d6;&#x7528;&#x6237;&#x8be6;&#x60c5;&#x9700;&#x8981;&#x767b;&#x9646;" ID="ID_1827808330" CREATED="1552631820778" MODIFIED="1552631842706"/>
<node TEXT="&#x6ce8;&#x518c;&#x7528;&#x6237;&#x4e0d;&#x9700;&#x8981;&#x9a8c;&#x8bc1;" ID="ID_1650023814" CREATED="1552631842940" MODIFIED="1552631909484"/>
</node>
<node ID="ID_1520182858" CREATED="1552631811945" MODIFIED="1552631811945"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">get_permissions</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span>):<br/>    <span style="color: #629755; font-style: italic"><font color="#629755"><i>&quot;&quot;&quot;<br/></i></font></span><font color="#629755"><i><span style="color: #629755; font-style: italic">    &#26681;&#25454;&#34892;&#20026;&#20998;&#37197;&#19981;&#21516;&#30340;&#26435;&#38480;<br/></span><span style="color: #629755; font-style: italic">    &quot;&quot;&quot;<br/></span><span style="color: #629755; font-style: italic">    </span></i></font><span style="color: #6a8759"><font color="#6a8759">&quot;&quot;&quot;<br/></font></span><font color="#6a8759"><span style="color: #6a8759">    Instantiates and returns the list of permissions that this view requires.<br/></span><span style="color: #6a8759">    &quot;&quot;&quot;<br/></span><span style="color: #6a8759">    </span></font><span style="color: #cc7832"><font color="#cc7832">if </font></span><span style="color: #94558d"><font color="#94558d">self</font></span>.action == <span style="color: #6a8759"><font color="#6a8759">'retrieve'</font></span>:<br/>        <span style="color: #cc7832"><font color="#cc7832">return </font></span>[permissions.IsAuthenticated()]<br/>    <span style="color: #cc7832"><font color="#cc7832">elif </font></span><span style="color: #94558d"><font color="#94558d">self</font></span>.action == <span style="color: #6a8759"><font color="#6a8759">'create'</font></span>:<br/>        <span style="color: #cc7832"><font color="#cc7832">return </font></span>[]<br/>    <span style="color: #cc7832"><font color="#cc7832">return </font></span>[]</pre>
  </body>
</html>

</richcontent>
</node>
</node>
<node TEXT=" &#x6839;&#x636e;&#x4e0d;&#x540c;&#x7684;method&#x7528;&#x4e0d;&#x540c;&#x7684;serializer" ID="ID_919563888" CREATED="1552631941733" MODIFIED="1552632477804">
<node TEXT=" GenericAPIView&#x7c7b;&#x4e0b;&#x7684;get_serializer_class()" ID="ID_804844668" CREATED="1552632014327" MODIFIED="1552632034592"/>
<node TEXT="serializer" ID="ID_1307401494" CREATED="1552632089172" MODIFIED="1552632097653">
<node TEXT="&#x521b;&#x5efa;&#x9700;&#x8981; &#x9a8c;&#x8bc1;&#x5bc6;&#x7801; &#x4e0e; &#x9a8c;&#x8bc1;&#x7801;" ID="ID_1306726466" CREATED="1552632047786" MODIFIED="1552632079861"/>
<node TEXT="&#x8be6;&#x60c5;&#x4e0d;&#x80fd;&#x8fd4;&#x56de;&#x4e0a;&#x8ff0;&#x7684;&#x5b57;&#x6bb5;" ID="ID_139285104" CREATED="1552632080471" MODIFIED="1552632512852">
<node TEXT="&#x8fd4;&#x56de;&#x5bc6;&#x7801;&#x4e0d;&#x5408;&#x7406;" ID="ID_1754906497" CREATED="1552632513084" MODIFIED="1552632520848"/>
<node TEXT="&#x9a8c;&#x8bc1;&#x7801;&#x5728;&#x521b;&#x5efa;&#x4e4b;&#x524d;&#x5c31;&#x5220;&#x4e86;" ID="ID_1491688937" CREATED="1552632521061" MODIFIED="1552632543793"/>
</node>
</node>
<node ID="ID_1895246073" CREATED="1552631991299" MODIFIED="1552632013131"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <pre style="background-color: #2b2b2b; color: #a9b7c6; font-family: &#x5b8b;&#x4f53;; font-size: 10.5pt"><span style="color: #cc7832"><font color="#cc7832">def </font></span><span style="color: #ffc66d"><font color="#ffc66d">get_serializer_class</font></span>(<span style="color: #94558d"><font color="#94558d">self</font></span>):<br/>    <span style="color: #629755; font-style: italic"><font color="#629755"><i>&quot;&quot;&quot;<br/></i></font></span><font color="#629755"><i><span style="color: #629755; font-style: italic">    &#35814;&#24773;&#19982;&#21019;&#24314;&#29992;&#19981;&#21516;&#30340;serializer<br/></span><span style="color: #629755; font-style: italic">    &quot;&quot;&quot;<br/></span><span style="color: #629755; font-style: italic">    </span></i></font><span style="color: #6a8759"><font color="#6a8759">&quot;&quot;&quot;<br/></font></span><font color="#6a8759"><span style="color: #6a8759">    Return the class to use for the serializer.<br/></span><span style="color: #6a8759">    Defaults to using `self.serializer_class`.<br/></span><span style="color: #6a8759"><br/></span><span style="color: #6a8759">    You may want to override this if you need to provide different<br/></span><span style="color: #6a8759">    serializations depending on the incoming request.<br/></span><span style="color: #6a8759"><br/></span><span style="color: #6a8759">    (Eg. admins get full serialization, others get basic serialization)<br/></span><span style="color: #6a8759">    &quot;&quot;&quot;<br/></span><span style="color: #6a8759">    </span></font>serializer_action = {<br/>        <span style="color: #6a8759"><font color="#6a8759">'retrieve'</font></span>: UserDetailSerializer<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">        </span></font><span style="color: #6a8759"><font color="#6a8759">'create'</font></span>: UserRegisterSerializer<span style="color: #cc7832"><font color="#cc7832">,<br/></font></span><font color="#cc7832"><span style="color: #cc7832">    </span></font>}<br/>    <span style="color: #cc7832"><font color="#cc7832">return </font></span>serializer_action.get(<span style="color: #94558d"><font color="#94558d">self</font></span>.action<span style="color: #cc7832"><font color="#cc7832">, </font></span>UserDetailSerializer)</pre>
  </body>
</html>

</richcontent>
</node>
</node>
</node>
</node>
</map>
